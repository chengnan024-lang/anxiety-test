<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æµ‹æµ‹ä½ çš„ç„¦è™‘ç¨‹åº¦</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); min-height: 100vh; display: flex; justify-content: center; align-items: center; padding: 15px; }
        .container { background: white; border-radius: 20px; padding: 30px 20px; max-width: 480px; width: 100%; text-align: center; box-shadow: 0 20px 60px rgba(0,0,0,0.5); position: relative; }
        h1 { color: #333; font-size: 24px; margin-bottom: 10px; }
        h2 { color: #333; font-size: 18px; margin-bottom: 15px; }
        .subtitle { color: #666; font-size: 14px; margin-bottom: 20px; line-height: 1.6; }
        .tag { display: inline-block; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 6px 14px; border-radius: 20px; font-size: 12px; margin-bottom: 15px; }
        
        .btn { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 16px 24px; font-size: 15px; border-radius: 50px; cursor: pointer; transition: all 0.3s; width: 100%; margin-bottom: 12px; text-align: left; display: flex; justify-content: space-between; align-items: center; }
        .btn:hover { transform: scale(1.02); box-shadow: 0 8px 25px rgba(102,126,234,0.4); }
        .btn-right { font-size: 13px; opacity: 0.8; }
        .btn-title { font-weight: bold; font-size: 16px; }
        .btn-desc { font-size: 12px; opacity: 0.8; display: block; margin-top: 4px; }
        .btn-premium { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); }
        .premium-tag { background: #fff; color: #f5576c; padding: 2px 8px; border-radius: 10px; font-size: 11px; margin-left: 8px; }
        
        .tip { color: #999; font-size: 12px; margin-top: 20px; }
        
        .question { display: none; text-align: left; }
        .question.active { display: block; }
        .question h2 { color: #333; font-size: 18px; margin-bottom: 25px; line-height: 1.6; font-weight: 500; }
        .progress { color: #999; font-size: 13px; margin-bottom: 15px; display: flex; align-items: center; gap: 10px; }
        .progress-bar { flex: 1; height: 4px; background: #eee; border-radius: 2px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #667eea, #764ba2); transition: width 0.3s; }
        .option { display: block; width: 100%; padding: 14px 18px; margin-bottom: 10px; border: 2px solid #eee; border-radius: 12px; background: white; font-size: 15px; cursor: pointer; transition: all 0.2s; text-align: left; }
        .option:hover { border-color: #667eea; }
        
        .calculating { display: none; }
        .calculating.active { display: block; }
        .calculating-text { color: #666; font-size: 14px; margin: 20px 0; }
        .dot { animation: dot 1.5s infinite; }
        @keyframes dot { 0%, 20% { opacity: 0; } 50% { opacity: 1; } 80%, 100% { opacity: 0; } }
        
        .result { display: none; }
        .result.active { display: block; }
        
        .section { text-align: left; margin-top: 20px; padding-top: 20px; border-top: 1px solid #eee; }
        .section h3 { font-size: 15px; color: #333; margin-bottom: 12px; }
        .detail-item { display: flex; justify-content: space-between; padding: 10px 0; border-bottom: 1px solid #f5f5f5; font-size: 14px; }
        .detail-label { color: #666; }
        .detail-value { color: #333; font-weight: 500; }
        
        .locked { display: none; }
        .locked.show { display: block; }
        
        .pay-btn { background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); margin-top: 15px; justify-content: center; }
        .pay-btn.show { display: flex; }
        
        .free-btn { background: #07c160; margin-top: 10px; justify-content: center; }
        
        .tip-red { color: #e74c3c; font-size: 12px; margin-top: 15px; padding: 10px; background: #fff5f5; border-radius: 8px; text-align: left; }
        
        /* ç²¾ç¥åˆ†æå…³é”®è¯ */
        .psycho-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0; }
        .psycho-item { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-radius: 12px; padding: 15px 10px; text-align: center; }
        .psycho-item.active { border: 2px solid #e94560; }
        .psycho-term { color: #e94560; font-size: 14px; font-weight: bold; margin-bottom: 5px; }
        .psycho-desc { color: #888; font-size: 11px; }
        
        .top-items { background: #fff5f5; border-radius: 12px; padding: 15px; margin: 15px 0; text-align: left; }
        .top-items h4 { color: #e74c3c; font-size: 14px; margin-bottom: 10px; }
        
        .day-plan { background: #f0fff0; border-radius: 12px; padding: 15px; margin: 15px 0; text-align: left; }
        .day-plan h4 { color: #07c160; font-size: 14px; margin-bottom: 10px; }
        .day-item { font-size: 13px; color: #666; padding: 6px 0; }
        
        .psycho-section { background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%); border-radius: 12px; padding: 20px; margin: 15px 0; text-align: left; }
        .psycho-section h4 { color: #e94560; font-size: 14px; margin-bottom: 15px; display: flex; align-items: center; }
        .psycho-section h4::before { content: "ğŸ§ "; margin-right: 8px; }
        .psycho-content { font-size: 13px; color: #b8b8d1; line-height: 1.9; text-align: left; }
        .psycho-content p { margin-bottom: 15px; }
        .psycho-content .highlight { color: #e94560; font-weight: bold; }
        .psycho-content .term { color: #4ecca3; font-style: italic; }
        .psycho-content .quote { border-left: 3px solid #4ecca3; padding-left: 12px; margin: 15px 0; font-style: italic; color: #888; }
        
        .wechat-pay { background: #07c160; }
        .alipay { background: #1677ff; }
        
        .premium-only { display: none; }
        .premium-only.show { display: block; }
    </style>
</head>
<body>
    <!-- é¦–é¡µ -->
    <div class="container" id="home">
        <span class="tag">å›½é™…æƒå¨é‡è¡¨ Â· å…è´¹æµ‹è¯„</span>
        <h1>æµ‹æµ‹ä½ çš„ç„¦è™‘ç¨‹åº¦</h1>
        <p class="subtitle">åŸºäºGAD-7ä¸PHQ-9å›½é™…æƒå¨é‡è¡¨<br>ç§‘å­¦è¯„ä¼°ä½ çš„å¿ƒç†çŠ¶æ€</p>
        
        <button class="btn" onclick="start(8)">
            <div>
                <div class="btn-title">å¿«é€Ÿåˆ†æ <span class="premium-tag" style="background:#07c160;color:white;font-size:10px;">å…è´¹</span></div>
                <span class="btn-desc">8é“é¢˜ Â· çº¦1åˆ†é’Ÿ</span>
            </div>
            <span class="btn-right">å…è´¹</span>
        </button>
        
        <button class="btn" onclick="start(15)">
            <div>
                <div class="btn-title">æ·±åº¦åˆ†æ</div>
                <span class="btn-desc">15é“é¢˜ Â· çº¦3åˆ†é’Ÿ</span>
            </div>
            <span class="btn-right">å…è´¹</span>
        </button>
        
        <button class="btn btn-premium" onclick="start(35)">
            <div>
                <div class="btn-title">ç²¾ç¥åˆ†æç‰ˆ <span class="premium-tag">æ¨è</span></div>
                <span class="btn-desc">35é“é¢˜ Â· å«æ·±åº¦ç²¾ç¥åˆ†æ</span>
            </div>
            <span class="btn-right">Â¥2.99</span>
        </button>
        
        <p class="tip">æœ¬æµ‹è¯„ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸ä½œä¸ºè¯Šç–—ä¾æ®</p>
    </div>

    <!-- è®¡ç®—é¡µ -->
    <div class="container calculating" id="calculating">
        <h1>æ­£åœ¨åˆ†æä¸­...</h1>
        <p class="calculating-text">
            <span id="calc-text">æ­£åœ¨ç»¼åˆåˆ†ææ‚¨çš„è¡Œä¸ºæ•°æ®ç‚¹<span class="dot">.</span><span class="dot">.</span><span class="dot">.</span></span>
        </p>
    </div>

    <!-- ç­”é¢˜é¡µ -->
    <div class="container question" id="quiz">
        <div class="progress">
            <span id="progress-text">1/35</span>
            <div class="progress-bar"><div class="progress-fill" id="progress-fill" style="width: 3%"></div></div>
        </div>
        <h2 id="questionText"></h2>
        <div id="options"></div>
    </div>

    <!-- ç»“æœé¡µ -->
    <div class="container result" id="result">
        <span class="tag">æµ‹è¯„å®Œæˆ</span>
        <h1>ä½ çš„å¿ƒç†å¥åº·æŠ¥å‘Š</h1>
        
        <div class="section">
            <h3>ğŸ“Š åŸºç¡€ç»“æœ</h3>
            <div class="detail-item">
                <span class="detail-label">ç„¦è™‘ä¸¥é‡åº¦</span>
                <span class="detail-value" id="anxiety-level">-</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">æŠ‘éƒé£é™©</span>
                <span class="detail-value" id="depression-level">-</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">ç¡çœ è´¨é‡</span>
                <span class="detail-value" id="sleep-level">-</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">æƒ…ç»ªç¨³å®šæ€§</span>
                <span class="detail-value" id="emotion-level">-</span>
            </div>
        </div>
        
        <div class="desc" id="desc"></div>
        
        <div class="locked" id="locked-section">
            <div style="padding: 15px; background: linear-gradient(135deg, #fff5f5 0%, #fff0f5 100%); border-radius: 12px; margin-bottom: 15px; text-align: left;">
                <p style="color: #f5576c; font-size: 14px; font-weight: bold; margin-bottom: 10px;">ğŸ”’ ä»˜è´¹è§£é”ç²¾ç¥åˆ†æç‰ˆ</p>
                <p style="color: #666; font-size: 13px; margin-bottom: 8px;">Â¥2.99è§£é”ä»¥ä¸‹å†…å®¹ï¼š</p>
                
                <div style="margin: 10px 0;">
                    <div style="font-size:13px;color:#666;padding:5px0;">â‘  é˜²å¾¡æœºåˆ¶åˆ†æï¼ˆæŠ•å°„/è®¤åŒ/å¦è®¤/å‹æŠ‘...ï¼‰</div>
                    <div style="font-size:13px;color:#666;padding:5px0;">â‘¡ ä¾æ‹ç±»å‹è¯Šæ–­</div>
                    <div style="font-size:13px;color:#666;padding:5px0;">â‘¢ æ½œæ„è¯†åœ°å½¢å›¾</div>
                    <div style="font-size:13px;color:#666;padding:5px0;">â‘£ ä¿„ç‹„æµ¦æ–¯æƒ…ç»“è§£è¯»</div>
                    <div style="font-size:13px;color:#666;padding:5px0;">â‘¤ 2500å­—æ·±åº¦ç²¾ç¥åˆ†ææŠ¥å‘Š</div>
                </div>
            </div>
        </div>
        
        <button class="btn pay-btn" id="payBtn" onclick="showPay()">
            <div style="text-align:center;width:100%;">
                <div class="btn-title">ç«‹å³æ”¯ä»˜ Â¥2.99</div>
            </div>
        </button>
        
        <button class="btn free-btn" onclick="share()">
            <div style="text-align:center;width:100%;">åˆ†äº«ç»™æœ‹å‹ä¸€èµ·æµ‹</div>
        </button>
        
        <p class="tip-red">ğŸ“ å¦‚æœ‰è‡ªä¼¤å¿µå¤´ï¼Œè¯·ç«‹å³æ‹¨æ‰“ 12356 å¿ƒç†æ´åŠ©çƒ­çº¿</p>
        <p class="tip">ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸ä½œä¸ºè¯Šç–—ä¾æ®</p>
    </div>

    <!-- æ”¯ä»˜é¡µ -->
    <div class="container" id="paypage" style="display:none;">
        <span class="tag">å®‰å…¨æ”¯ä»˜</span>
        <h1>ç¡®è®¤æ”¯ä»˜</h1>
        <p class="subtitle">Â¥2.99 è§£é”ç²¾ç¥åˆ†æç‰ˆ</p>
        
        <div style="text-align:left; margin: 20px 0;">
            <div class="detail-item">
                <span>é˜²å¾¡æœºåˆ¶åˆ†æ</span>
                <span>âœ…</span>
            </div>
            <div class="detail-item">
                <span>ä¾æ‹ç±»å‹è¯Šæ–­</span>
                <span>âœ…</span>
            </div>
            <div class="detail-item">
                <span>æ½œæ„è¯†åœ°å½¢å›¾</span>
                <span>âœ…</span>
            </div>
            <div class="detail-item">
                <span>2500å­—æ·±åº¦æŠ¥å‘Š</span>
                <span>âœ…</span>
            </div>
        </div>
        
        <button class="btn wechat-pay" onclick="paySuccess()">
            <div style="text-align:center;width:100%;">
                <div class="btn-title">å¾®ä¿¡æ”¯ä»˜ Â¥2.99</div>
            </div>
        </button>
        
        <button class="btn alipay" style="margin-top:10px;">
            <div style="text-align:center;width:100%;">
                <div class="btn-title">æ”¯ä»˜å®æ”¯ä»˜ Â¥2.99</div>
            </div>
        </button>
        
        <button class="btn" style="margin-top:15px;background:#999;" onclick="back()">
            <div style="text-align:center;width:100%;">è¿”å›</div>
        </button>
    </div>

    <!-- å®Œæ•´æŠ¥å‘Šé¡µ -->
    <div class="container result" id="fullreport" style="display:none;">
        <span class="tag" style="background:#07c160;">ğŸ‰ æ”¯ä»˜æˆåŠŸ</span>
        <h1>ä½ çš„ç²¾ç¥åˆ†ææŠ¥å‘Š</h1>
        
        <!-- é˜²å¾¡æœºåˆ¶ -->
        <div class="psycho-section" style="text-align:left;">
            <h4>ğŸ›¡ï¸ ä½ çš„é˜²å¾¡æœºåˆ¶</h4>
            <div class="psycho-grid" id="defenseGrid">
                <div class="psycho-item">
                    <div class="psycho-term">æŠ•å°„</div>
                    <div class="psycho-desc">æŠŠè‡ªå·±çš„æ¬²æœ›æŠ•å°„ç»™ä»–äºº</div>
                </div>
                <div class="psycho-item">
                    <div class="psycho-term">è®¤åŒ</div>
                    <div class="psycho-desc">å†…åŒ–é‡è¦ä»–äººçš„ç‰¹è´¨</div>
                </div>
                <div class="psycho-item">
                    <div class="psycho-term">å¦è®¤</div>
                    <div class="psycho-desc">æ‹’ç»æ‰¿è®¤ç°å®</div>
                </div>
                <div class="psycho-item">
                    <div class="psycho-term">å‹æŠ‘</div>
                    <div class="psycho-desc">æŠŠç—›è‹¦æ’é™¤åœ¨æ„è¯†å¤–</div>
                </div>
                <div class="psycho-item">
                    <div class="psycho-term">åˆç†åŒ–</div>
                    <div class="psycho-desc">ä¸ºä¸åˆç†æ‰¾å€Ÿå£</div>
                </div>
                <div class="psycho-item">
                    <div class="psycho-term">é€€è¡Œ</div>
                    <div class="psycho-desc">å›åˆ°æ—©æœŸå¿ƒç†é˜¶æ®µ</div>
                </div>
            </div>
        </div>
        
        <!-- ä¾æ‹ç±»å‹ -->
        <div class="psycho-section" style="text-align:left;">
            <h4>ğŸ’• ä¾æ‹ç±»å‹</h4>
            <div id="attachmentType" style="font-size:14px;color:#b8b8d1;line-height:1.8;"></div>
        </div>
        
        <!-- æ½œæ„è¯† -->
        <div class="psycho-section" style="text-align:left;">
            <h4>ğŸŒŠ æ½œæ„è¯†åœ°å½¢å›¾</h4>
            <div id="unconsciousMap" style="font-size:13px;color:#b8b8d1;line-height:1.8;"></div>
        </div>
        
        <!-- æ·±åº¦åˆ†æ -->
        <div class="psycho-section">
            <h4>æ·±åº¦ç²¾ç¥åˆ†ææŠ¥å‘Š</h4>
            <div class="psycho-content" id="psychoContent">
                <p>æ­£åœ¨ç”Ÿæˆåˆ†ææŠ¥å‘Š...</p>
            </div>
        </div>
        
        <button class="btn" style="background:#07c160;margin-top:20px;" onclick="downloadReport()">
            <div style="text-align:center;width:100%;">
                <div class="btn-title">ä¿å­˜æŠ¥å‘Šåˆ°ç›¸å†Œ</div>
            </div>
        </button>
        
        <button class="btn" style="margin-top:10px;" onclick="share()">
            <div style="text-align:center;width:100%;">åˆ†äº«ç»™æœ‹å‹</div>
        </button>
        
        <p class="tip-red">ğŸ“ å¦‚éœ€ä¸“ä¸šå¸®åŠ©ï¼Œè¯·æ‹¨æ‰“ 12356</p>
    </div>

    <script>
        const allQuestions = [
            // GAD-7
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ æœ‰å¤šå°‘æ—¶å€™æ„Ÿåˆ°ç´§å¼ ä¸å®‰æˆ–çƒ¦èºï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ æœ‰å¤šå°‘æ—¶å€™æ— æ³•æ§åˆ¶è‡ªå·±çš„æ‹…å¿§ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ æœ‰å¤šå°‘æ—¶å€™è¿‡åº¦æ‹…å¿§å„ç§äº‹æƒ…ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ æœ‰å¤šå°‘æ—¶å€™æ— æ³•æ”¾æ¾ä¸‹æ¥ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ æœ‰å¤šå°‘æ—¶å€™åç«‹ä¸å®‰ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ æœ‰å¤šå°‘æ—¶å€™å®¹æ˜“å‘æ€’ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ æœ‰å¤šå°‘æ—¶å€™æ„Ÿåˆ°å®³æ€•ï¼Ÿ",
            // PHQ-9
            "è¿‡å»ä¸¤å‘¨ï¼Œåšäº‹æ—¶æä¸èµ·åŠ²æˆ–æ²¡æœ‰ä¹è¶£ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œæ„Ÿåˆ°å¿ƒæƒ…ä½è½ã€æ²®ä¸§æˆ–ç»æœ›ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œå…¥ç¡å›°éš¾æˆ–ç¡çœ è´¨é‡å·®ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œæ„Ÿè§‰ç–²å€¦æˆ–æ²¡æœ‰ç²¾åŠ›ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œé£Ÿæ¬²ä¸æŒ¯æˆ–åƒå¤ªå¤šï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨è§‰å¾—è‡ªå·±å¾ˆç³Ÿã€å¤±è´¥ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œå¯¹äº‹ç‰©éš¾ä»¥é›†ä¸­æ³¨æ„åŠ›ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼ŒåŠ¨ä½œæˆ–è¯´è¯ç¼“æ…¢/çƒ¦èºåç«‹ä¸å®‰ï¼Ÿ",
            // è‡ªç ”-é˜²å¾¡æœºåˆ¶ç›¸å…³
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ ä¼šæŠŠé”™è¯¯å½’å’äºä»–äººï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ éš¾ä»¥æ‰¿è®¤è‡ªå·±çš„é”™è¯¯ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ å¸¸è§‰å¾—è‡ªå·±ä¸å¤Ÿå¥½ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œå¤±è´¥åä½ ä¼šæ‰¾å€Ÿå£ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ å›é¿ä¸äººå‘ç”Ÿå†²çªï¼Ÿ",
            // ä¾æ‹ç›¸å…³
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ å®³æ€•è¢«æŠ›å¼ƒï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ è¿‡åº¦ä¾èµ–ä»–äººè®¤å¯ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ éš¾ä»¥ä¿¡ä»»ä»–äººï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ ä¸ä»–äººä¿æŒè·ç¦»ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ å®³æ€•äº²å¯†å…³ç³»ï¼Ÿ",
            // èº¯ä½“åŒ–
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ ä¼šçªç„¶å¿ƒè·³åŠ å¿«æˆ–èƒ¸é—·ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ å‡ºç°è‚Œè‚‰ç´§ç»·æŒç»­å¾ˆä¹…ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ å› ä¸ºç„¦è™‘å›é¿å‡ºé—¨ï¼Ÿ",
            // åŠŸèƒ½å½±å“
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ ä¼šæ‹–å»¶é‡è¦ä»»åŠ¡ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œç„¦è™‘è®©ä½ å·¥ä½œæ•ˆç‡ä¸‹é™ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œç„¦è™‘è®©ä½ æ›´å®¹æ˜“ä¸äººå†²çªï¼Ÿ",
            // ç¡çœ 
            "è¿‡å»ä¸¤å‘¨ï¼Œèººä¸‹åè„‘å­åœä¸ä¸‹æ¥ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼ŒåŠå¤œé†’æ¥éš¾ä»¥å†æ¬¡å…¥ç¡ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œé†’æ¥åä¾ç„¶ç–²æƒ«ï¼Ÿ",
            // èµ„æº
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ èƒ½æ‰¾åˆ°è‡³å°‘ä¸€ä¸ªäººå€¾è¯‰ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ ä¸€å‘¨æœ‰è‡³å°‘3æ¬¡èº«ä½“æ´»åŠ¨ï¼Ÿ",
            "è¿‡å»ä¸¤å‘¨ï¼Œä½ çŸ¥é“è‡³å°‘2ç§æ–¹æ³•è®©è‡ªå·±ç¼“è§£ï¼Ÿ"
        ];
        
        const options = ["å®Œå…¨æ²¡æœ‰", "å‡ å¤©", "ä¸€åŠä»¥ä¸Šå¤©æ•°", "å‡ ä¹æ¯å¤©"];
        
        let current = 0;
        let answers = [];
        let totalQuestions = 35;

        function start(count) {
            totalQuestions = count;
            current = 0;
            answers = [];
            document.getElementById('home').style.display = 'none';
            document.getElementById('quiz').classList.add('active');
            showQuestion();
        }

        function showQuestion() {
            document.getElementById('progress-text').textContent = `${current + 1}/${totalQuestions}`;
            document.getElementById('progress-fill').style.width = `${((current + 1) / totalQuestions) * 100}%`;
            document.getElementById('questionText').textContent = allQuestions[current];
            const opts = document.getElementById('options');
            opts.innerHTML = '';
            options.forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option';
                btn.textContent = opt;
                btn.onclick = () => select(i);
                opts.appendChild(btn);
            });
        }

        function select(i) {
            answers.push(i);
            if (current < totalQuestions - 1) {
                current++;
                showQuestion();
            } else {
                showCalculating();
            }
        }

        function showCalculating() {
            document.getElementById('quiz').classList.remove('active');
            document.getElementById('calculating').classList.add('active');
            
            let idx = 0;
            const texts = ["æ­£åœ¨è§£æä½ çš„é˜²å¾¡æœºåˆ¶...", "æ­£åœ¨æ„å»ºä¾æ‹ç±»å‹æ¨¡å‹...", "æ½œæ„è¯†åˆ†æä¸­..."];
            const interval = setInterval(() => {
                document.getElementById('calc-text').innerHTML = texts[idx] + '<span class="dot">.</span><span class="dot">.</span><span class="dot">.</span>';
                idx++;
                if (idx >= texts.length) {
                    clearInterval(interval);
                    showResult();
                }
            }, 1500);
        }

        function showResult() {
            document.getElementById('calculating').classList.remove('active');
            
            const gad7Score = answers.slice(0, 7).reduce((a, b) => a + b, 0);
            const phqScore = answers.slice(7, 16).reduce((a, b) => a + b, 0);
            const sleepScore = answers[9];
            const emotionScore = answers[6];
            
            document.getElementById('anxiety-level').textContent = gad7Score <= 4 ? "æ­£å¸¸" : (gad7Score <= 9 ? "è½»åº¦" : (gad7Score <= 14 ? "ä¸­åº¦" : "é‡åº¦"));
            document.getElementById('depression-level').textContent = phqScore <= 4 ? "æ­£å¸¸" : (phqScore <= 9 ? "è½»åº¦" : (phqScore <= 14 ? "ä¸­åº¦" : "é‡åº¦"));
            document.getElementById('sleep-level').textContent = sleepScore <= 1 ? "è‰¯å¥½" : (sleepScore <= 2 ? "ä¸€èˆ¬" : "è¾ƒå·®");
            document.getElementById('emotion-level').textContent = emotionScore <= 1 ? "ç¨³å®š" : (emotionScore <= 2 ? "ä¸€èˆ¬" : "ä¸ç¨³å®š");
            
            const total = answers.reduce((a, b) => a + b, 0);
            const percentage = Math.round((1 - total / (totalQuestions * 3)) * 100);
            
            let desc = "ä½ çš„å¿ƒç†çŠ¶æ€å¾ˆå¥åº·ï¼ç»§ç»­ä¿æŒè§„å¾‹ä½œæ¯å’Œé€‚åº¦è¿åŠ¨ã€‚";
            if (percentage < 80) desc = "ä½ æœ€è¿‘æœ‰ä¸€äº›ç„¦è™‘æƒ…ç»ªï¼Œä½†è¿˜åœ¨å¯æ§åˆ¶èŒƒå›´å†…ã€‚å»ºè®®é€‚å½“æ”¾æ¾ï¼Œå¯ä»¥å°è¯•æ·±å‘¼å¸ï¼Œè¿åŠ¨æˆ–å†¥æƒ³ã€‚";
            else if (percentage < 60) desc = "ä½ çš„ç„¦è™‘æƒ…ç»ªæ¯”è¾ƒæ˜æ˜¾ï¼Œå¯èƒ½å·²ç»å½±å“åˆ°æ—¥å¸¸ç”Ÿæ´»ã€‚å»ºè®®å…³æ³¨è‡ªå·±çš„å¿ƒç†çŠ¶æ€ï¼Œå¯ä»¥å°è¯•å¯»æ±‚ä¸“ä¸šå¸®åŠ©ã€‚";
            else if (percentage < 40) desc = "ä½ çš„ç„¦è™‘ç—‡çŠ¶æ¯”è¾ƒä¸¥é‡ï¼Œå»ºè®®å°½å¿«å¯»æ±‚ä¸“ä¸šå¿ƒç†å’¨è¯¢å¸ˆçš„å¸®åŠ©ã€‚";
            else desc = "å»ºè®®ä½ ç«‹å³å¯»æ±‚ä¸“ä¸šå¸®åŠ©ã€‚è®°ä½ï¼Œä½ ä¸æ˜¯ä¸€ä¸ªäººã€‚";
            
            document.getElementById('desc').textContent = desc;
            
            if (totalQuestions >= 35) {
                document.getElementById('locked-section').classList.add('show');
                document.getElementById('payBtn').classList.add('show');
            }
            
            document.getElementById('result').classList.add('active');
        }

        function showPay() {
            document.getElementById('result').classList.remove('active');
            document.getElementById('paypage').style.display = 'block';
        }

        function back() {
            document.getElementById('paypage').style.display = 'none';
            document.getElementById('result').classList.add('active');
        }

        function paySuccess() {
            document.getElementById('paypage').style.display = 'none';
            document.getElementById('fullreport').style.display = 'block';
            
            generatePsycho();
        }

        function generatePsycho() {
            // è®¡ç®—å„ç»´åº¦
            const gad7 = answers.slice(0, 7).reduce((a,b)=>a+b, 0);
            const phq = answers.slice(7, 16).reduce((a,b)=>a+b, 0);
            const defense = answers.slice(16, 21).reduce((a,b)=>a+b, 0);
            const attachment = answers.slice(21, 26).reduce((a,b)=>a+b, 0);
            const body = answers.slice(26, 29).reduce((a,b)=>a+b, 0);
            const function_ = answers.slice(29, 32).reduce((a,b)=>a+b, 0);
            
            // é˜²å¾¡æœºåˆ¶
            const defenseItems = document.querySelectorAll('.psycho-item');
            const defenseScores = [
                answers[16] + answers[17], // æŠ•å°„
                answers[18] + answers[19], // è®¤åŒ
                answers[16] + answers[17], // å¦è®¤
                answers[7] + answers[8],   // å‹æŠ‘
                answers[19] + answers[20], // åˆç†åŒ–
                answers[14] + answers[15]  // é€€è¡Œ
            ];
            
            defenseItems.forEach((item, i) => {
                if (defenseScores[i] >= 3) {
                    item.classList.add('active');
                }
            });
            
            // ä¾æ‹ç±»å‹
            let attachmentText = "";
            if (attachment <= 3) {
                attachmentText = "ä½ è¡¨ç°å‡º<span class='term'>å®‰å…¨å‹ä¾æ‹</span>çš„ç‰¹å¾ã€‚ä½ èƒ½å¤Ÿè‡ªå¦‚åœ°å»ºç«‹äº²å¯†å…³ç³»ï¼ŒåŒæ—¶ä¿æŒå¥åº·çš„ç‹¬ç«‹ç©ºé—´ã€‚ä½ å¯¹ä»–äººçš„ä¿¡ä»»åº¦è¾ƒé«˜ï¼Œæ„¿æ„åœ¨å…³ç³»ä¸­å±•ç°çœŸå®çš„è‡ªæˆ‘ã€‚è¿™æ˜¯æœ€ç†æƒ³çš„ä¾æ‹ç±»å‹ã€‚";
            } else if (attachment <= 6) {
                attachmentText = "ä½ å‘ˆç°å‡º<span class='term'>ç„¦è™‘å‹ä¾æ‹</span>çš„å€¾å‘ã€‚ä½ å¯¹å…³ç³»ä¸­çš„ä¸ç¡®å®šæ€§æ„Ÿé«˜åº¦æ•æ„Ÿï¼Œæ—¶å¸¸æ‹…å¿ƒè¢«æŠ›å¼ƒã€‚ä½ å¯èƒ½åœ¨äº²å¯†å…³ç³»ä¸­è¡¨ç°å‡ºè¿‡åº¦ä¾èµ–æˆ–æƒ…ç»ªåŒ–çš„è¡Œä¸ºã€‚å»ºè®®é€šè¿‡è‡ªæˆ‘è§‰å¯Ÿæ¥ç¼“è§£è¿™ç§ç„¦è™‘ã€‚";
            } else if (attachment <= 9) {
                attachmentText = "ä½ è¡¨ç°å‡º<span class='term'>å›é¿å‹ä¾æ‹</span>çš„ç‰¹ç‚¹ã€‚ä½ å€¾å‘äºä¸ä»–äººä¿æŒè·ç¦»ï¼Œå›é¿äº²å¯†æ¥è§¦ã€‚è¿™å¯èƒ½æºäºæ—©æœŸå…³ç³»ä¸­çš„åˆ›ä¼¤ï¼Œè®©ä½ å­¦ä¼šäº†ç”¨å†·æ¼ æ¥ä¿æŠ¤è‡ªå·±ã€‚";
            } else {
                attachmentText = "ä½ å‘ˆç°å‡º<span class='term'>æ··ä¹±å‹ä¾æ‹</span>çš„å¤æ‚ç‰¹å¾ã€‚è¿™æ˜¯ä¾æ‹ç³»ç»Ÿå—åˆ°ä¸¥é‡å¹²æ‰°çš„è¡¨ç°ï¼Œå¯èƒ½ä¸æ—©æœŸçš„æç«¯åˆ›ä¼¤ç»å†æœ‰å…³ã€‚å»ºè®®å¯»æ±‚ä¸“ä¸šå¿ƒç†å¸®åŠ©æ¥å¤„ç†è¿™äº›æ·±å±‚åˆ›ä¼¤ã€‚";
            }
            document.getElementById('attachmentType').innerHTML = attachmentText;
            
            // æ½œæ„è¯†
            let unconsciousText = "";
            if (gad7 > phq) {
                unconsciousText = "ä½ çš„<span class='highlight'>æ„è¯†å±‚é¢</span>è¢«ç„¦è™‘æƒ…ç»ªä¸»å¯¼ï¼Œä½†åœ¨<span class='highlight'>å‰æ„è¯†</span>å±‚é¢ï¼Œå¯èƒ½å­˜åœ¨è¢«<span class='term'>å‹æŠ‘</span>çš„æœªå®Œæˆæƒ…ç»ªã€‚ä½ çš„<span class='highlight'>æ½œæ„è¯†</span>æ­£åœ¨é€šè¿‡ç„¦è™‘ç—‡çŠ¶æé†’ä½ ï¼šæŸäº›æƒ…æ„Ÿéœ€æ±‚æœªè¢«æ»¡è¶³ã€‚";
            } else if (phq > gad7) {
                unconsciousText = "ä½ çš„å¿ƒç†èƒ½é‡ä¼¼ä¹<span class='highlight'>å‘å†…</span>æŠ•å°„ã€‚æŠ‘éƒåœ¨ç²¾ç¥åˆ†æä¸­è¢«ç§°ä¸º<span class='term'>å‘å†…çš„æ„¤æ€’</span>â€”â€”ä½ å¯èƒ½æŠŠå¯¹å¤–éƒ¨çš„æ•Œæ„è½¬å‘äº†è‡ªèº«ã€‚ä½ çš„æ½œæ„è¯†æ­£åœ¨ç»å†ä¸€åœº<span class='highlight'>è‡ªæˆ‘æ”»å‡»</span>ã€‚";
            } else {
                unconsciousText = "ä½ çš„<span class='highlight'>æ„è¯†</span>ä¸<span class='highlight'>æ½œæ„è¯†</span>å¤„äºæŒç»­çš„å†²çªä¸­ã€‚è¿™æ˜¯<span class='term'>ç¥ç»ç—‡æ€§ç„¦è™‘</span>çš„å…¸å‹è¡¨ç°â€”â€”è¶…æˆ‘ä¸æœ¬æˆ‘ä¹‹é—´çš„æˆ˜äº‰æ­£åœ¨ä½ çš„å†…å¿ƒæ¿€çƒˆè¿›è¡Œã€‚";
            }
            document.getElementById('unconsciousMap').innerHTML = unconsciousText;
            
            // æ·±åº¦ç²¾ç¥åˆ†ææŠ¥å‘Š
            let report = "";
            
            // ä¿„ç‹„æµ¦æ–¯æƒ…ç»“
            report += `<p>ä»ä½ çš„<span class='highlight'>ä¿„ç‹„æµ¦æ–¯æƒ…ç»“(Oedipus Complex)</span>æ¥çœ‹ï¼Œä½ åœ¨æ—©æœŸæˆé•¿è¿‡ç¨‹ä¸­å¯èƒ½å­˜åœ¨<span class='term'>ä¸‰è§’å…³ç³»å›°æ‰°</span>ã€‚è¿™ç§æ½œæ„è¯†çš„å†²çªè‡³ä»Šä»åœ¨å½±å“ä½ çš„äººé™…å…³ç³»æ¨¡å¼ï¼Œç‰¹åˆ«æ˜¯åœ¨ç«äº‰ä¸äº²å¯†çš„å¹³è¡¡ä¸Šã€‚</p>`;
            
            // é˜²å¾¡æœºåˆ¶åˆ†æ
            if (defense >= 8) {
                report += `<p>ä½ é«˜åº¦ä¾èµ–<span class='term'>é˜²å¾¡æœºåˆ¶</span>æ¥ç»´æŒå¿ƒç†å¹³è¡¡ã€‚é¢‘ç¹ä½¿ç”¨<span class='highlight'>å¦è®¤</span>ã€<span class='highlight'>æŠ•å°„</span>ç­‰åˆçº§é˜²å¾¡è¡¨æ˜ï¼Œä½ ä»åœ¨ç”¨<span class='term'>åˆ†è£‚</span>çš„æ–¹å¼æ¥å¤„ç†å†…å¿ƒå†²çªã€‚è¿™ç§é˜²å¾¡æ–¹å¼è™½ç„¶èƒ½çŸ­æœŸç¼“è§£ç—›è‹¦ï¼Œä½†é•¿æœŸæ¥çœ‹ä¼šé˜»ç¢<span class='highlight'>è‡ªæˆ‘</span>çš„æˆç†Ÿã€‚</p>`;
            } else if (defense >= 5) {
                report += `<p>ä½ ä½¿ç”¨<span class='term'>å‹æŠ‘</span>ä¸<span class='term'>åˆç†åŒ–</span>ç­‰<span class='highlight'>ç¥ç»ç—‡æ€§é˜²å¾¡</span>ã€‚è¿™æ˜¯è¾ƒä¸ºæˆç†Ÿçš„é˜²å¾¡æ–¹å¼ï¼Œä½†ä¹Ÿæ„å‘³ç€ä½ å¯èƒ½åœ¨<span class='highlight'>æ„è¯†</span>å±‚é¢å‹æŠ‘äº†è¿‡å¤šæƒ…ç»ªã€‚å»ºè®®é€šè¿‡<span class='term'>è‡ªç”±è”æƒ³</span>æ¥æ¥è§¦è¿™äº›è¢«å‹æŠ‘çš„å†…å®¹ã€‚</p>`;
            } else {
                report += `<p>ä½ çš„<span class='term'>é˜²å¾¡æœºåˆ¶</span>ç›¸å¯¹æˆç†Ÿï¼Œèƒ½å¤Ÿè¾ƒå¥½åœ°<span class='highlight'>å‡å</span>æ”»å‡»æ€§å†²åŠ¨ã€‚è¿™ç§èƒ½åŠ›è®©ä½ åœ¨ç¤¾äº¤ä¸­è¡¨ç°å¾—ä½“ï¼Œä½†ä¹Ÿéœ€è¦æ³¨æ„ä¸è¦è¿‡åº¦<span class='highlight'>å‹æŠ‘</span>çœŸå®æƒ…æ„Ÿï¼Œä»¥å…é™·å…¥<span class='term'>æƒ…æ„Ÿéš”ç¦»</span>ã€‚</p>`;
            }
            
            // èº¯ä½“åŒ–
            if (body >= 5) {
                report += `<p>ä½ å­˜åœ¨æ˜æ˜¾çš„<span class='term'>èº¯ä½“åŒ–(Somatization)</span>å€¾å‘ã€‚åœ¨ç²¾ç¥åˆ†æä¸­ï¼Œèº¯ä½“ç—‡çŠ¶è¢«è§†ä¸º<span class='highlight'>éšå–»</span>â€”â€”ä½ çš„èº«ä½“åœ¨è¡¨è¾¾é‚£äº›<span class='term'>æ— æ³•ç”¨è¯­è¨€</span>è¡¨è¾¾çš„æƒ…æ„Ÿã€‚è¿™å¯èƒ½ä¸ä½ æ—©æœŸçš„<span class='highlight'>è¡¨è¾¾é™åˆ¶</span>æœ‰å…³ã€‚`;
            }
            
            // å®¢ä½“å…³ç³»
            report += `<p>ä»<span class='term'>å®¢ä½“å…³ç³»</span>è§’åº¦çœ‹ï¼Œä½ çš„<span class='highlight'>å†…åœ¨å·¥ä½œæ¨¡å‹</span>å¯èƒ½åœç•™åœ¨<span class='term'>éƒ¨åˆ†å®¢ä½“</span>é˜¶æ®µã€‚è¿™æ„å‘³ç€ä½ å€¾å‘äºç”¨<span class='highlight'>åˆ†è£‚</span>çš„çœ¼å…‰çœ‹å¾…ä»–äººâ€”â€”è¦ä¹ˆå…¨å¥½ï¼Œè¦ä¹ˆå…¨åã€‚è¿™ç§<span class='term'>åæ‰§-åˆ†è£‚ä½</span>éœ€è¦é€šè¿‡<span class='highlight'>æŒç»­çš„å®‰å…¨å…³ç³»</span>æ¥ä¿®é€šã€‚</p>`;
            
            // è‡ªæ‹
            if (phq > 10) {
                report += `<p>ä½ å¯èƒ½æ­£åœ¨ç»å†<span class='term'>è‡ªæ‹æŸä¼¤</span>ã€‚<span class='highlight'>æŠ‘éƒ</span>å¸¸æ˜¯<span class='term'>è‡ªæ‹</span>æ— æ³•å¾—åˆ°æ»¡è¶³åçš„<span class='highlight'>ä»£å¿æ€§ååº”</span>ã€‚ä½ éœ€è¦é‡æ–°å»ºç«‹<span class='term'>å¤¸å¤§è‡ªä½“</span>ä¸<span class='highlight'>ç°å®</span>ä¹‹é—´çš„æ¡¥æ¢ã€‚</p>`;
            }
            
            // æ­»äº¡æœ¬èƒ½
            if (answers[13] >= 2) {
                report += `<p>ä½ çš„<span class='term'>æ­»äº¡æœ¬èƒ½(Death Drive)</span>è¾ƒä¸ºæ´»è·ƒã€‚è¿™åœ¨ç²¾ç¥åˆ†æä¸­æŒ‡çš„æ˜¯ä¸€ç§<span class='highlight'>é‡å¤</span>ä¸<span class='term'>å›å½’æ— æœºçŠ¶æ€</span>çš„é©±åŠ›ã€‚å®ƒå¯èƒ½è¡¨ç°ä¸º<span class='highlight'>å¼ºè¿«æ€§é‡å¤</span>æˆ–è‡ªæˆ‘ç ´åè¡Œä¸ºã€‚å»ºè®®é€šè¿‡<span class='term'>åŠ›æ¯”å¤š</span>çš„è½¬åŒ–æ¥å‡åè¿™ç§èƒ½é‡ã€‚</p>`;
            }
            
            // æ²»ç–—å»ºè®®
            report += `<div class='quote'>"æ— æ„è¯†å†…å®¹å¿…é¡»è½¬åŒ–ä¸ºæ„è¯†ï¼Œæˆ‘ä»¬æ‰èƒ½è·å¾—æ²»æ„ˆã€‚" â€”â€” å¼—æ´›ä¼Šå¾·</div>`;
            
            report += `<p><span class='highlight'>æ²»ç–—å»ºè®®ï¼š</span>ä½ é€‚åˆ<span class='term'>ç²¾ç¥åˆ†æå–å‘</span>çš„å¿ƒç†å’¨è¯¢ã€‚é€šè¿‡<span class='highlight'>ç§»æƒ…</span>ä¸<span class='term'>åç§»æƒ…</span>çš„å·¥ä½œï¼Œä¿®é€šæ—©æœŸ<span class='highlight'>å®¢ä½“å…³ç³»</span>ä¸­çš„åˆ›ä¼¤ã€‚æœ€ç»ˆç›®æ ‡æ˜¯ä»<span class='term'>åæ‰§-åˆ†è£‚ä½</span>èµ°å‘<span class='highlight'>æŠ‘éƒä½</span>ï¼Œå®ç°<span class='term'>æ•´åˆ</span>ã€‚</p>`;
            
            document.getElementById('psychoContent').innerHTML = report;
        }

        function downloadReport() {
            alert('æŠ¥å‘Šå·²ä¿å­˜åˆ°ç›¸å†Œï¼');
        }

        function share() {
            alert('è¯·åˆ†äº«ç»™æœ‹å‹ä¸€èµ·æµ‹è¯•~');
        }
    </script>
</body>
</html>
