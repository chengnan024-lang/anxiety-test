<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‹çˆ±è„‘ç¨‹åº¦æµ‹è¯?| ä½ æ‹çˆ±ä¸Šå¤´äº†å—ï¼Ÿ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, sans-serif; 
            background: linear-gradient(135deg, #FFF5E6 0%, #FFE4CC 50%, #FFF0E5 100%); 
            min-height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            padding: 20px;
            background-attachment: fixed;
        }
        
        .container { 
            background: rgba(255, 255, 255, 0.95); 
            border-radius: 24px; 
            padding: 40px 28px; 
            max-width: 420px; 
            width: 100%; 
            text-align: center; 
            box-shadow: 0 8px 32px rgba(255, 154, 98, 0.15); 
            position: relative;
            backdrop-filter: blur(10px);
        }
        
        h1 { 
            color: #1a1a1a; 
            font-size: 26px; 
            font-weight: 700; 
            margin-bottom: 8px; 
            letter-spacing: -0.5px;
        }
        
        .subtitle { 
            color: #666; 
            font-size: 14px; 
            margin-bottom: 28px; 
            line-height: 1.6; 
        }
        
        .tag { 
            display: inline-block; 
            background: linear-gradient(135deg, #FF9A62 0%, #FFB347 100%); 
            color: white; 
            padding: 8px 20px; 
            border-radius: 20px; 
            font-size: 12px; 
            margin-bottom: 24px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(255, 154, 98, 0.3);
        }
        
        .btn { 
            background: white; 
            color: #1a1a1a; 
            border: 2px solid #f0f0f0; 
            padding: 18px 24px; 
            font-size: 15px; 
            border-radius: 16px; 
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            width: 100%; 
            margin-bottom: 14px; 
            text-align: left; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
        }
        
        .btn:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 24px rgba(255, 154, 98, 0.2);
            border-color: #FF9A62;
        }
        
        .btn-right { font-size: 14px; font-weight: 600; color: #FF9A62; }
        .btn-title { font-weight: 600; font-size: 16px; color: #1a1a1a; }
        .btn-desc { font-size: 12px; color: #999; display: block; margin-top: 4px; }
        
        .btn-premium { background: linear-gradient(135deg, #FF9A62 0%, #FFB347 100%); color: white; border: none; }
        .btn-premium:hover { border-color: transparent; }
        .btn-premium .btn-title { color: white; }
        .btn-premium .btn-desc { color: rgba(255,255,255,0.8); }
        .btn-premium .btn-right { color: white; }
        
        .tip { color: #999; font-size: 12px; margin-top: 24px; }
        
        .question { display: none; text-align: left; animation: fadeIn 0.3s ease; }
        .question.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .question h2 { 
            color: #1a1a1a; 
            font-size: 18px; 
            margin-bottom: 28px; 
            line-height: 1.7; 
            font-weight: 500;
        }
        
        .progress { color: #999; font-size: 13px; margin-bottom: 20px; display: flex; align-items: center; gap: 12px; }
        .progress-bar { flex: 1; height: 6px; background: #f0f0f0; border-radius: 3px; overflow: hidden; }
        .progress-fill { height: 100%; background: linear-gradient(90deg, #FF9A62, #FFB347); transition: width 0.4s; border-radius: 3px; }
        
        .option { display: block; width: 100%; padding: 16px 20px; margin-bottom: 12px; border: 2px solid #f0f0f0; border-radius: 14px; background: white; font-size: 15px; cursor: pointer; transition: all 0.2s; text-align: left; color: #333; }
        .option:hover { border-color: #FF9A62; background: #FFF8F5; }
        
        .calculating { display: none; text-align: center; padding: 40px 0; }
        .calculating.active { display: block; }
        
        .loading-spinner { width: 40px; height: 40px; border: 3px solid #f0f0f0; border-top-color: #FF9A62; border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 20px; }
        @keyframes spin { to { transform: rotate(360deg); } }
        
        .result { display: none; animation: fadeIn 0.4s ease; }
        .result.active { display: block; }
        
        .result-emoji { font-size: 64px; margin-bottom: 8px; }
        .result-type { font-size: 28px; font-weight: 700; color: #FF9A62; margin-bottom: 8px; }
        .result-desc { font-size: 15px; color: #666; margin-bottom: 24px; line-height: 1.8; padding: 0 8px; }
        
        .score-box { 
            background: linear-gradient(135deg, #FFF5E6 0%, #FFE8D6 100%); 
            border-radius: 16px; 
            padding: 20px; 
            margin-bottom: 24px;
            border: 1px solid #FFE4CC;
        }
        
        .score-title { font-size: 14px; color: #999; margin-bottom: 12px; }
        .score-num { font-size: 48px; font-weight: 700; color: #FF9A62; }
        .score-label { font-size: 14px; color: #FF9A62; font-weight: 500; }
        
        .section { text-align: left; margin-top: 24px; padding-top: 24px; border-top: 1px solid #f5f5f5; }
        .section h3 { font-size: 15px; color: #1a1a1a; margin-bottom: 16px; font-weight: 600; }
        
        .detail-item { display: flex; justify-content: space-between; padding: 12px 0; border-bottom: 1px solid #f8f8f8; font-size: 14px; }
        .detail-label { color: #666; }
        .detail-value { color: #1a1a1a; font-weight: 500; }
        
        .locked { display: none; margin-top: 24px; }
        .locked.show { display: block; }
        
        .pay-btn { background: linear-gradient(135deg, #FF9A62 0%, #FFB347 100%); margin-top: 20px; justify-content: center; color: white; border: none; }
        .pay-btn.show { display: flex; }
        .free-btn { background: #07c160; margin-top: 12px; justify-content: center; color: white; border: none; }
        
        .tip-red { color: #FF9A62; font-size: 12px; margin-top: 20px; padding: 14px; background: #FFF5E6; border-radius: 12px; text-align: left; line-height: 1.6; }
        
        .feature-box { background: linear-gradient(135deg, #FFF5E6 0%, #FFF8F5 100%); border-radius: 16px; padding: 20px; margin: 20px 0; text-align: left; border: 1px solid #FFE4CC; }
        .feature-box h4 { color: #FF9A62; font-size: 15px; margin-bottom: 14px; font-weight: 600; }
        .feature-item { font-size: 13px; color: #666; padding: 8px 0; display: flex; align-items: center; }
        .feature-item::before { content: "âœ?; color: #FF9A62; margin-right: 10px; font-weight: bold; }
        
        .psycho-section { background: linear-gradient(135deg, #2d2d1a 0%, #3d3520 100%); border-radius: 16px; padding: 24px; margin: 20px 0; text-align: left; }
        .psycho-section h4 { color: #FFD699; font-size: 15px; margin-bottom: 16px; font-weight: 600; }
        .psycho-content { font-size: 13px; color: #d4d4d8; line-height: 1.9; text-align: left; }
        .psycho-content p { margin-bottom: 14px; }
        .highlight { color: #FFD699; font-weight: 600; }
        .term { color: #A78BFA; font-style: italic; }
        
        .wechat-pay { background: #07c160; color: white; border: none; }
        .alipay { background: #1677ff; color: white; border: none; margin-top: 10px; }
        
        .price-tag { background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%); color: #1a1a1a; padding: 4px 12px; border-radius: 12px; font-size: 12px; font-weight: 700; }
        
        .level-bar { height: 12px; background: #f0f0f0; border-radius: 6px; overflow: hidden; margin: 8px 0; }
        .level-fill { height: 100%; border-radius: 6px; transition: width 0.5s ease; }
        
        .brain-level { padding: 12px 20px; border-radius: 12px; margin: 12px 0; font-weight: 600; }
    </style>
</head>
<body>
    <!-- é¦–é¡µ -->
    <div class="container" id="home">
        <span class="tag">å°çº¢ä¹?çˆ†æ¬¾æµ‹è¯•</span>
        <h1>æ‹çˆ±è„‘ç¨‹åº¦æµ‹è¯?/h1>
        <p class="subtitle">æµ‹ä¸€æµ‹ä½ æœ‰å¤šä¸Šå¤´<br>äº†è§£è‡ªå·±çš„æ‹çˆ±æŠ•å…¥ç¨‹åº?/p>
        
        <button class="btn" onclick="start(8)">
            <div>
                <div class="btn-title">å¿«é€Ÿç‰ˆ</div>
                <span class="btn-desc">8é“é¢˜ Â· çº?åˆ†é’Ÿ</span>
            </div>
            <span class="btn-right">å…è´¹</span>
        </button>
        
        <button class="btn" onclick="start(14)">
            <div>
                <div class="btn-title">æ ‡å‡†ç‰?/div>
                <span class="btn-desc">14é“é¢˜ Â· çº?åˆ†é’Ÿ</span>
            </div>
            <span class="btn-right">å…è´¹</span>
        </button>
        
        <button class="btn btn-premium" onclick="start(22)">
            <div>
                <div class="btn-title">
                    æ·±åº¦ç‰?                    <span class="price-tag">çƒ­é—¨</span>
                </div>
                <span class="btn-desc">22é“é¢˜ Â· å«æ·±åº¦è§£æ?/span>
            </div>
            <span class="btn-right">Â¥2.99</span>
        </button>
        
        <p class="tip">æœ¬æµ‹è¯•ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæƒ…æ„Ÿå»ºè®?/p>
    </div>

    <!-- è®¡ç®—é¡?-->
    <div class="container calculating" id="calculating">
        <div class="loading-spinner"></div>
        <h1>åˆ†æä¸?..</h1>
        <p class="subtitle">æ­£åœ¨è§£æä½ çš„æ‹çˆ±è„‘æŒ‡æ•?/p>
    </div>

    <!-- ç­”é¢˜é¡?-->
    <div class="container question" id="quiz">
        <div class="progress">
            <span id="progress-text">1/22</span>
            <div class="progress-bar"><div class="progress-fill" id="progress-fill" style="width: 4%"></div></div>
        </div>
        <h2 id="questionText"></h2>
        <div id="options"></div>
    </div>

    <!-- ç»“æœé¡?-->
    <div class="container result" id="result">
        <span class="tag">æµ‹è¯„å®Œæˆ</span>
        
        <div class="result-emoji" id="emoji">ğŸ§ </div>
        <div class="result-type" id="typeName">è½»åº¦æ‹çˆ±è„?/div>
        <div class="result-desc" id="typeDesc">ä½ æ‹çˆ±æ—¶æ¯”è¾ƒç†æ€?/div>
        
        <div class="score-box">
            <div class="score-title">ä½ çš„æ‹çˆ±è„‘æŒ‡æ•?/div>
            <div class="score-num" id="scoreNum">65</div>
            <div class="score-label" id="scoreLabel">åˆ?/div>
            <div class="level-bar"><div class="level-fill" id="levelBar" style="width:65%;background:linear-gradient(90deg,#FF9A62,#FFB347);"></div></div>
        </div>
        
        <div class="section">
            <h3>ğŸ“Š ç»´åº¦åˆ†æ</h3>
            <div class="detail-item">
                <span class="detail-label">ä¸Šå¤´ç¨‹åº¦</span>
                <span class="detail-value" id="obsessionLevel">-</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">ä»˜å‡ºç¨‹åº¦</span>
                <span class="detail-value" id="devotionLevel">-</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">ç†æ€§ç¨‹åº?/span>
                <span class="detail-value" id="rationalLevel">-</span>
            </div>
        </div>
        
        <div class="locked" id="locked-section">
            <div class="feature-box">
                <h4>ğŸ”’ è§£é”æ·±åº¦åˆ†æ</h4>
                <p style="color:#666;font-size:13px;margin-bottom:14px;">Â¥2.99è§£é”å…¨éƒ¨æ·±åº¦å†…å®¹</p>
                <div class="feature-item">æ‹çˆ±è„‘ç¨‹åº¦è§£è¯?/div>
                <div class="feature-item">ä¸Šå¤´åŸå› åˆ†æ</div>
                <div class="feature-item">æ½œåœ¨é£é™©æç¤º</div>
                <div class="feature-item">å…³ç³»å¹³è¡¡å»ºè®®</div>
                <div class="feature-item">å¿ƒç†å­¦æ·±åº¦è§£è¯?/div>
            </div>
        </div>
        
        <button class="btn pay-btn" id="payBtn" onclick="showPay()">
            <span style="text-align:center;width:100%;font-weight:600;">ç«‹å³æ”¯ä»˜ Â¥2.99</span>
        </button>
        
        <button class="btn free-btn" onclick="share()">
            <span style="text-align:center;width:100%;font-weight:600;">åˆ†äº«ç»™æœ‹å‹ä¸€èµ·æµ‹</span>
        </button>
        
        <p class="tip-red">ğŸ’¡ ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸ä½œä¸ºæƒ…æ„Ÿå»ºè®?/p>
    </div>

    <!-- æ”¯ä»˜é¡?-->
    <div class="container" id="paypage" style="display:none;">
        <span class="tag">å®‰å…¨æ”¯ä»˜</span>
        <h1>ç¡®è®¤æ”¯ä»˜</h1>
        <p class="subtitle">Â¥2.99 è§£é”æ·±åº¦ç‰?/p>
        
        <div class="feature-box">
            <div class="detail-item"><span>æ‹çˆ±è„‘æ·±åº¦è§£è¯?/span><span>âœ?/span></div>
            <div class="detail-item"><span>ä¸Šå¤´åŸå› åˆ†æ</span><span>âœ?/span></div>
            <div class="detail-item"><span>å¿ƒç†å­¦è§£è¯?/span><span>âœ?/span></div>
        </div>
        
        <button class="btn wechat-pay" onclick="paySuccess()">
            <span style="text-align:center;width:100%;font-weight:600;">å¾®ä¿¡æ”¯ä»˜ Â¥2.99</span>
        </button>
        
        <button class="btn alipay" style="margin-top:10px;">
            <span style="text-align:center;width:100%;font-weight:600;">æ”¯ä»˜å®æ”¯ä»?Â¥2.99</span>
        </button>
        
        <button class="btn" style="margin-top:16px;background:#f5f5f5;color:#666;border:none;" onclick="back()">
            <span style="text-align:center;width:100%;font-weight:600;">è¿”å›</span>
        </button>
    </div>

    <!-- å®Œæ•´æŠ¥å‘Šé¡?-->
    <div class="container result" id="fullreport" style="display:none;">
        <span class="tag" style="background:linear-gradient(135deg, #07c160 0%, #06ad56 100%);">ğŸ‰ æ”¯ä»˜æˆåŠŸ</span>
        
        <div class="result-emoji" id="emoji2">ğŸ§ </div>
        <div class="result-type" id="typeName2">è½»åº¦æ‹çˆ±è„?/div>
        <div class="result-desc" id="typeDesc2">ä½ æ‹çˆ±æ—¶æ¯”è¾ƒç†æ€?/div>
        
        <div class="score-box">
            <div class="score-title">ä½ çš„æ‹çˆ±è„‘æŒ‡æ•?/div>
            <div class="score-num" id="scoreNum2">65</div>
            <div class="score-label">åˆ?/div>
        </div>
        
        <!-- ä¸Šå¤´åŸå›  -->
        <div class="psycho-section">
            <h4>ğŸ”¥ ä½ ä¸Šå¤´çš„åŸå› </h4>
            <div class="psycho-content" id="reasonAnalysis"></div>
        </div>
        
        <!-- é£é™©æç¤º -->
        <div class="feature-box">
            <h4>âš ï¸ æ½œåœ¨é£é™©æç¤º</h4>
            <div id="riskAnalysis" style="font-size:13px;color:#666;line-height:1.8;"></div>
        </div>
        
        <!-- å»ºè®® -->
        <div class="psycho-section">
            <h4>ğŸ’¡ å…³ç³»å¹³è¡¡å»ºè®®</h4>
            <div class="psycho-content" id="adviceAnalysis"></div>
        </div>
        
        <!-- å¿ƒç†å­?-->
        <div class="psycho-section">
            <h4>ğŸ§  å¿ƒç†å­¦æ·±åº¦è§£è¯?/h4>
            <div class="psycho-content" id="psychoContent"></div>
        </div>
        
        <button class="btn wechat-pay" style="margin-top:20px;" onclick="downloadReport()">
            <span style="text-align:center;width:100%;font-weight:600;">ä¿å­˜æŠ¥å‘Šåˆ°ç›¸å†?/span>
        </button>
        
        <button class="btn" style="margin-top:10px;background:#f5f5f5;color:#333;border:none;" onclick="share()">
            <span style="text-align:center;width:100%;font-weight:600;">åˆ†äº«ç»™æœ‹å?/span>
        </button>
        
        <p class="tip">ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸ä½œä¸ºè¯Šæ–­ä¾æ?/p>
    </div>

    <script>
        const questions = [
            // æŠ•å…¥ç¨‹åº¦
            "æ‹çˆ±åï¼Œä½ æ¯å¤©èŠ±å¤šå°‘æ—¶é—´æƒ³å¯¹æ–¹ï¼Ÿ",
            "ä½ ä¼šç»å¸¸æŸ¥çœ‹å¯¹æ–¹çš„ç¤¾äº¤åŠ¨æ€å—ï¼?,
            "å¯¹æ–¹ä¸å›æ¶ˆæ¯æ—¶ï¼Œä½ ä¼šç„¦è™‘å—ï¼Ÿ",
            "ä½ æ„¿æ„ä¸ºå¯¹æ–¹ä»˜å‡ºå¤šå°‘ï¼?,
            // ç†æ€§ç¨‹åº?            "æ‹çˆ±ä¸­ä½ èƒ½ä¿æŒç†æ€§å—ï¼?,
            "ä½ ä¼šæ— æ¡ä»¶åŸè°…å¯¹æ–¹å—ï¼?,
            "æ‹çˆ±å½±å“ä½ çš„ç”Ÿæ´»/å·¥ä½œå—ï¼Ÿ",
            // ä¸Šå¤´è¡Œä¸º
            "ä½ ä¼šä¸ºäº†å¯¹æ–¹æ”¾å¼ƒæœºä¼šå—ï¼Ÿ",
            "ä½ ä¼šåœ¨ç¤¾äº¤å¹³å°é¢‘ç¹ç§€æ©çˆ±å—ï¼Ÿ",
            "ä½ ä¼šç»å¸¸é—®\"ä½ çˆ±æˆ‘å—\"å—ï¼Ÿ",
            // ä¾èµ–ç¨‹åº¦
            "åˆ†æ‰‹åä½ ä¼šå¾ˆéš¾èµ°å‡ºæ¥å—ï¼Ÿ",
            "ä½ æ‹çˆ±åç–è¿œæœ‹å‹äº†å—ï¼?,
            "ä½ ç»å¸¸å¹»æƒ³å’Œå¯¹æ–¹çš„æœªæ¥å—ï¼?,
            // æ·±å…¥
            "æ‹çˆ±æ—¶ä½ æ›´çœ‹é‡æ„Ÿè§‰è¿˜æ˜¯åˆé€‚ï¼Ÿ",
            "ä½ ä¼šè¢«\"å¯¹æˆ‘å¥½\"æ‰“åŠ¨å—ï¼Ÿ",
            "ä½ æ„¿æ„é—ªå©šå—ï¼?,
            "æ‹çˆ±ä¸­ä½ æœ€çœ‹é‡ä»€ä¹ˆï¼Ÿ",
            "ä½ æœ‰è¿‡\"æ‹çˆ±è„‘\"çš„æ—¶åˆ»å—ï¼?,
            "ä½ è®¤ä¸ºæ‹çˆ±éœ€è¦ç†æ€§è¿˜æ˜¯æ„Ÿæ€§ï¼Ÿ",
            "ä½ ä¼šè¢«æ˜Ÿåº?å…«å­—åŒ¹é…å½±å“å—ï¼Ÿ",
            "ä½ æ‹çˆ±æ—¶ä¼šå¤±å»è‡ªæˆ‘å—ï¼?,
            "ä½ ç›¸ä¿¡\"å‘½ä¸­æ³¨å®š\"å—ï¼Ÿ"
        ];
        
        const options = [
            ["æ¯å°æ—¶éƒ½åœ¨æƒ³", "å¶å°”æƒ?, "å¾ˆå°‘æƒ?],
            ["ç»å¸¸æŸ¥çœ‹", "å¶å°”çœ‹çœ‹", "ä»ä¸"],
            ["éå¸¸ç„¦è™‘", "æœ‰ç‚¹ç„¦è™‘", "ä¸ä¼š"],
            ["å€¾å°½æ‰€æœ?, "é€‚åº¦ä»˜å‡º", "ä¿ç•™è‡ªå·±"],
            ["å®Œå…¨å¯ä»¥", "æœ‰æ—¶æ„Ÿæ€?, "å®Œå…¨æ„Ÿæ€?],
            ["ä¼šçš„", "çœ‹æƒ…å†?, "ä¸ä¼š"],
            ["ä¸¥é‡å½±å“", "æœ‰ç‚¹å½±å“", "ä¸å—å½±å“"],
            ["ä¼šçš„", "çœ‹æƒ…å†?, "ä¸ä¼š"],
            ["ä¼?, "å¶å°”", "ä¸ä¼š"],
            ["ç»å¸¸é—?, "å¶å°”", "ä»ä¸"],
            ["éå¸¸éš?, "ä¸€èˆ?, "å¾ˆå¿«"],
            ["æ˜¯çš„ï¼Œç–è¿œäº†", "å¶å°”", "æ²¡æœ‰"],
            ["ç»å¸¸å¹»æƒ³", "å¶å°”", "å¾ˆå°‘"],
            ["æ„Ÿè§‰", "åˆé€?, "éƒ½é‡è¦?],
            ["ä¼?, "çœ‹æƒ…å†?, "ä¸ä¼š"],
            ["æ„¿æ„", "çœ‹æ„Ÿè§?, "ä¸æ„¿æ„?],
            ["é¢œå€?, "å¯¹æˆ‘å¥?, "èŠå¾—æ?],
            ["æœ‰ï¼Œå¤ªä¸Šå¤´äº†", "æœ‰è¿‡", "æ²¡æœ‰"],
            ["æ„Ÿæ€?, "ç†æ€?, "å¹³è¡¡"],
            ["ä¼?, "æœ‰ç‚¹", "å®Œå…¨ä¸ä¿¡"],
            ["ä¼?, "å¶å°”", "ä¸ä¼š"],
            ["ç›¸ä¿¡", "ä¸€åŠä¸€å?, "ä¸ç›¸ä¿?]
        ];
        
        // æ‹çˆ±è„‘ç­‰çº?        const brainLevels = {
           0: { name: "ç†æ€§ç‹è€?, emoji: "ğŸ§Š", desc: "ä½ æ‹çˆ±æ—¶è¶…çº§ç†æ€§ï¼ä¸ä¼šè¢«æ„Ÿæƒ…å†²æ˜å¤´è„‘ï¼Œèƒ½å¾ˆå¥½åœ°å¹³è¡¡çˆ±æƒ…å’Œç”Ÿæ´»ã€?, color: "#87CEEB" },
           30: { name: "è½»åº¦æ‹çˆ±è„?, emoji: "ğŸ§ ", desc: "ä½ æ‹çˆ±æ—¶æ¯”è¾ƒç†æ€§ï¼Œèƒ½ä¿æŒè‡ªæˆ‘ï¼Œä¸ä¼šè¿‡åº¦æ²‰è¿·ã€?, color: "#90EE90" },
           60: { name: "ä¸­åº¦æ‹çˆ±è„?, emoji: "ğŸ’•", desc: "ä½ æ‹çˆ±æ—¶ä¼šæœ‰äº›ä¸Šå¤´ï¼Œä½†è¿˜èƒ½ä¿æŒåŸºæœ¬ç†æ€§ã€?, color: "#FFB347" },
           80: { name: "é‡åº¦æ‹çˆ±è„?, emoji: "ğŸ’˜", desc: "ä½ æ‹çˆ±æ—¶éå¸¸ä¸Šå¤´ï¼çœ¼é‡Œåªæœ‰å¯¹æ–¹ï¼Œå®¹æ˜“å¤±å»è‡ªæˆ‘ã€?, color: "#FF6B6B" },
           100: { name: "æ‹çˆ±è„‘æ™šæœ?, emoji: "ğŸ’”", desc: "ä½ æ‹çˆ±å®Œå…¨ä¸Šå¤´ï¼å»ºè®®é€‚å½“ä¿æŒç†æ€§ï¼Œå¤šå…³æ³¨è‡ªå·±çš„ç”Ÿæ´»ã€?, color: "#DC143C" }
        };
        
        let current = 0;
        let answers = [];
        let totalQuestions = 22;
        let score = 0;

        function start(count) {
            totalQuestions = count;
            current = 0;
            answers = [];
            score = 0;
            document.getElementById('home').style.display = 'none';
            document.getElementById('quiz').classList.add('active');
            showQuestion();
        }

        function showQuestion() {
            document.getElementById('progress-text').textContent = `${current + 1}/${totalQuestions}`;
            document.getElementById('progress-fill').style.width = `${((current + 1) / totalQuestions) * 100}%`;
            document.getElementById('questionText').textContent = questions[current];
            
            const opts = document.getElementById('options');
            opts.innerHTML = '';
            options[current].forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option';
                btn.textContent = opt;
                btn.onclick = () => select(i);
                opts.appendChild(btn);
            });
        }

        function select(i) {
            answers.push(i);
            // 0=2åˆ?1=1åˆ?2=0åˆ?(è¶Šåé¢çš„é€‰é¡¹è¶Šç†æ€?
            score += (2 - i) * (10 / totalQuestions) * 3;
            
            if (current < totalQuestions - 1) {
                current++;
                showQuestion();
            } else {
                showCalculating();
            }
        }

        function showCalculating() {
            document.getElementById('quiz').classList.remove('active');
            document.getElementById('calculating').classList.add('active');
            
            setTimeout(() => {
                document.getElementById('calculating').classList.remove('active');
                showResult();
            }, 1500);
        }

        function showResult() {
            score = Math.round(Math.max(0, Math.min(100, score)));
            
            // ç¡®å®šç­‰çº§
            let level = "0";
            if (score >= 80) level = "100";
            else if (score >= 60) level = "80";
            else if (score >= 30) level = "60";
            else if (score >= 10) level = "30";
            
            const result = brainLevels[level];
            
            document.getElementById('emoji').textContent = result.emoji;
            document.getElementById('typeName').textContent = result.name;
            document.getElementById('typeDesc').textContent = result.desc;
            document.getElementById('scoreNum').textContent = score;
            document.getElementById('levelBar').style.width = score + "%";
            document.getElementById('levelBar').style.background = result.color;
            
            // ç»´åº¦åˆ†æ
            const obsession = score > 60 ? "é«? : (score > 30 ? "ä¸? : "ä½?);
            const devotion = answers.slice(0,4).reduce((a,b)=>a+(2-b),0) > 4 ? "é«? : "ä¸?;
            const rational = score < 40 ? "é«? : (score < 70 ? "ä¸? : "ä½?);
            
            document.getElementById('obsessionLevel').textContent = obsession;
            document.getElementById('devotionLevel').textContent = devotion;
            document.getElementById('rationalLevel').textContent = rational;
            
            if (totalQuestions >= 22) {
                document.getElementById('locked-section').classList.add('show');
                document.getElementById('payBtn').classList.add('show');
            }
            
            document.getElementById('result').classList.add('active');
        }

        function showPay() {
            document.getElementById('result').classList.remove('active');
            document.getElementById('paypage').style.display = 'block';
        }

        function back() {
            document.getElementById('paypage').style.display = 'none';
            document.getElementById('result').classList.add('active');
        }

        function paySuccess() {
            document.getElementById('paypage').style.display = 'none';
            document.getElementById('fullreport').style.display = 'block';
            
            const score = parseInt(document.getElementById('scoreNum').textContent);
            const type = document.getElementById('typeName').textContent;
            
            document.getElementById('emoji2').textContent = brainLevels[score >= 80 ? "100" : (score >= 60 ? "80" : (score >= 30 ? "60" : (score >= 10 ? "30" : "0")))].emoji;
            document.getElementById('typeName2').textContent = type;
            document.getElementById('typeDesc2').textContent = brainLevels[score >= 80 ? "100" : (score >= 60 ? "80" : (score >= 30 ? "60" : (score >= 10 ? "30" : "0")))].desc;
            document.getElementById('scoreNum2').textContent = score;
            
            generateDeepAnalysis(score, type);
        }

        function generateDeepAnalysis(score, type) {
            // ä¸Šå¤´åŸå› 
            let reason = "";
            if (score >= 80) {
                reason = "<p>ä½ å±äº?span class='highlight'>æƒ…æ„Ÿé©±åŠ¨å?/span>ã€‚ä½ å®¹æ˜“è¢«å¯¹æ–¹çš„<span class='term'>æƒ…ç»ªä»·å€?/span>æ‰€å¸å¼•ï¼Œä¸€æ—¦å¿ƒåŠ¨å°±ä¼šå…¨èº«å¿ƒæŠ•å…¥ã€‚è¿™ç§ç±»å‹çš„æ‹çˆ±è„‘å¾€å¾€æºäº<span class='highlight'>ç«¥å¹´ç¼ºä¹å®‰å…¨æ„?/span>ï¼Œæˆå¹´åé€šè¿‡æ‹çˆ±æ¥å¼¥è¡¥å†…å¿ƒçš„ç©ºæ´ã€?/p>";
            } else if (score >= 50) {
                reason = "<p>ä½ å±äº?span class='highlight'>ç†æ€§ä¸æ„Ÿæ€§å¹¶å­?/span>ã€‚ä½ ä¼šåœ¨æ‹çˆ±ä¸­ä¿æŒä¸€å®šç†æ€§ï¼Œä½†ä¹Ÿä¼šè¢«æµªæ¼«å†²æ˜å¤´è„‘ã€‚ä½ çš„æ‹çˆ±è„‘ä¸»è¦æ¥è‡ª<span class='term'>å¤šå·´èƒ?/span>çš„åˆ†æ³Œå¸¦æ¥çš„å¿«æ„Ÿï¼Œè®©ä½ äº«å?span class='highlight'>å¿ƒè·³</span>çš„æ„Ÿè§‰ã€?/p>";
            } else {
                reason = "<p>ä½ å±äº?span class='highlight'>ç†æ€§åˆ†æå‹</span>ã€‚ä½ ä¸ä¼šè¢«æ„Ÿæƒ…å†²æ˜å¤´è„‘ï¼Œä¼šç”¨ç†æ€§çœ¼å…‰çœ‹å¾…æ‹çˆ±ã€‚è¿™ç§ç‰¹è´¨è®©ä½ åœ¨æ‹çˆ±ä¸?span class='term'>è¾ƒå°‘å—ä¼¤</span>ï¼Œä½†ä¹Ÿå¯èƒ½å› ä¸ºè¿‡äºç†æ€§è€?span class='highlight'>é”™è¿‡çœŸçˆ±</span>ã€?/p>";
            }
            document.getElementById('reasonAnalysis').innerHTML = reason;
            
            // é£é™©
            let risk = "";
            if (score >= 80) {
                risk = "âš ï¸ é£é™©æç¤ºï¼šä½ å®¹æ˜“åœ¨æ‹çˆ±ä¸­å¤±å»è‡ªæˆ‘ï¼Œå¯èƒ½å¿½è§†å®¶äººæœ‹å‹ã€‚å»ºè®®ä¿æŒç‹¬ç«‹ç¤¾äº¤åœˆï¼Œç†æ€§çœ‹å¾…æ„Ÿæƒ…ã€?;
            } else if (score >= 50) {
                risk = "âš ï¸ é£é™©æç¤ºï¼šé€‚åº¦ä¸Šå¤´æ˜¯æ­£å¸¸çš„ï¼Œä½†è¦æ³¨æ„ä¸è¦å½±å“æ­£å¸¸å·¥ä½œç”Ÿæ´»ã€‚å»ºè®®ä¿æŒç†æ€§åˆ¤æ–­ã€?;
            } else {
                risk = "âœ?é£é™©è¾ƒä½ï¼šä½ æ¯”è¾ƒç†æ€§ï¼Œä½†ä¹Ÿè¦å­¦ä¼šåœ¨é€‚å½“æ—¶å€™æ”¾æ¾ï¼Œäº«å—æ‹çˆ±çš„å¿ƒåŠ¨æ„Ÿè§‰ã€?;
            }
            document.getElementById('riskAnalysis').innerHTML = risk;
            
            // å»ºè®®
            let advice = "";
            if (score >= 80) {
                advice = "<p>1. <span class='highlight'>å»ºç«‹ç‹¬ç«‹ç¤¾äº¤åœ?/span>ï¼Œä¸è¦æŠŠå…¨éƒ¨ç²¾åŠ›æ”¾åœ¨æ‹äººèº«ä¸Š<br>2. <span class='term'>è®¾ç½®å†·é™æœ?/span>ï¼Œé‡è¦å†³å®šå…ˆæ”?4å°æ—¶å†å¤„ç?br>3. <span class='highlight'>ä¿æŒå…´è¶£çˆ±å¥½</span>ï¼Œä¸è¦ä¸ºäº†æ‹çˆ±æ”¾å¼ƒè‡ªæˆ‘æˆé•?br>4. <span class='term'>å­¦ä¼šç‹¬å¤„</span>ï¼Œäº«å—å•èº«æ—¶çš„è‡ªç”±æ—¶å…?/p>";
            } else if (score >= 50) {
                advice = "<p>1. <span class='highlight'>äº«å—æ‹çˆ±</span>çš„åŒæ—¶ä¿æŒåŸºæœ¬ç†æ€?br>2. <span class='term'>å®šæœŸåæ€?/span>è‡ªå·±çš„æ„Ÿæƒ…çŠ¶æ€?br>3. <span class='highlight'>ä¿æŒæœ‹å‹åœ?/span>ï¼Œä¸è¦å¿½è§†æœ‹å?br>4. <span class='term'>æ²Ÿé€šå¾ˆé‡è¦</span>ï¼Œæœ‰æƒ³æ³•åŠæ—¶è¡¨è¾¾</p>";
            } else {
                advice = "<p>1. <span class='highlight'>é€‚å½“æ„Ÿæ€?/span>ä¸€ç‚¹ï¼Œäº«å—å¿ƒè·³çš„æ„Ÿè§?br>2. <span class='term'>ä¸è¦è¿‡äºè‹›åˆ»</span>ï¼Œç»™æ„Ÿæƒ…ä¸€äº›ç©ºé—?br>3. <span class='highlight'>ç›¸ä¿¡ç›´è§‰</span>ï¼Œæœ‰æ—¶å€™è·Ÿç€æ„Ÿè§‰èµ?br>4. <span class='term'>æ”¾ä¸‹é˜²å¤‡</span>ï¼Œå‹‡æ•¢æ¥å—çˆ±</p>";
            }
            document.getElementById('adviceAnalysis').innerHTML = advice;
            
            // å¿ƒç†å­¦æ·±åº?            let psycho = "";
            if (score >= 80) {
                psycho = "<p>ä»?span class='highlight'>ç²¾ç¥åˆ†æ</span>è§’åº¦ï¼Œä½ çš„æ‹çˆ±è„‘æºäº<span class='term'>æ—©æœŸä¾æ‹åˆ›ä¼¤</span>ã€‚ç«¥å¹´å¯èƒ½ç¼ºä¹ç¨³å®šçš„<span class='highlight'>æƒ…æ„Ÿç…§é¡¾è€?/span>ï¼Œå¯¼è‡´æˆå¹´åå¯¹äº²å¯†å…³ç³»æœ‰è¿‡åº¦çš?span class='term'>æƒ…æ„Ÿéœ€æ±?/span>ã€‚è¿™åœ¨å¿ƒç†å­¦ä¸Šç§°ä¸?span class='highlight'>ç„¦è™‘å‹ä¾æ?/span>çš„å»¶ä¼¸ã€?/p><p>ä½ æŠŠæ‹äººå½“ä½œ<span class='term'>ç†æƒ³çˆ¶æ¯</span>çš„æ›¿èº«ï¼ŒæœŸæœ›ä»å¯¹æ–¹èº«ä¸Šè·å¾?span class='highlight'>ç«¥å¹´ç¼ºå¤±çš„çˆ±</span>ã€‚è¿™ç§æ¨¡å¼å®¹æ˜“å¯¼è‡?span class='term'>æ‹çˆ±ä¸­çš„è¿‡åº¦ä¾èµ–</span>ï¼Œéœ€è¦åœ¨<span class='highlight'>è‡ªæˆ‘æˆé•¿</span>ä¸­ç–—æ„ˆã€?/p>";
            } else if (score >= 50) {
                psycho = "<p>ä»?span class='highlight'>ç¥ç»ç”Ÿç‰©å­?/span>è§’åº¦ï¼Œæ‹çˆ±æ—¶å¤§è„‘ä¼šåˆ†æ³Œå¤§é‡?span class='term'>å¤šå·´èƒ?/span>å’?span class='highlight'>å‚¬äº§ç´?/span>ï¼Œè®©ä½ äº§ç”Ÿæ„‰æ‚¦æ„Ÿå’Œä¾æ‹æ„Ÿã€‚ä½ çš„æ‹çˆ±è„‘æ˜?span class='term'>æ­£å¸¸çš„ç”Ÿç†ååº?/span>ï¼Œä½†éœ€è¦ä¸<span class='highlight'>ç†æ€§æ€ç»´</span>å¹³è¡¡ã€?/p><p>ä½ çš„ä¾æ‹æ¨¡å¼å±äº<span class='term'>å®‰å…¨å?/span>ä¸?span class='highlight'>ç„¦è™‘å?/span>ä¹‹é—´ï¼Œèƒ½å¤Ÿäº«å—äº²å¯†ä½†ä¿æŒä¸€å®šç‹¬ç«‹æ€§ã€‚è¿™æ˜?span class='highlight'>å¥åº·çš„æ‹çˆ±çŠ¶æ€?/span>ã€?/p>";
            } else {
                psycho = "<p>ä»?span class='highlight'>è®¤çŸ¥å¿ƒç†å­?/span>è§’åº¦ï¼Œä½ æ“…é•¿ç”?span class='term'>ç†æ€§æ€ç»´</span>å¤„ç†æƒ…æ„Ÿé—®é¢˜ã€‚è¿™å¯èƒ½æ˜¯ä¸€ç§?span class='highlight'>é˜²å¾¡æœºåˆ¶</span>â€”â€”é€šè¿‡ç†æ€§åŒ–æ?span class='term'>ä¿æŠ¤è‡ªå·±</span>ä¸å—æƒ…æ„Ÿä¼¤å®³ã€?/p><p>ä½†è¿‡åº¦çš„ç†æ€§å¯èƒ½å¯¼è‡?span class='highlight'>æƒ…æ„Ÿéš”ç¦»</span>ï¼Œæ— æ³•çœŸæ­£äº«å—äº²å¯†å…³ç³»ã€‚å»ºè®?span class='term'>é€‚å½“æ”¾ä¸‹é˜²å¤‡</span>ï¼Œç»™æ„Ÿæƒ…ä¸€äº?span class='highlight'>è‡ªç”±ç”Ÿé•¿</span>çš„ç©ºé—´ã€?/p>";
            }
            
            psycho += "<p style='margin-top:15px;'><span class='highlight'>åˆ†æå¸ˆè¯´ï¼?/span>æ‹çˆ±è„‘ä¸æ˜¯ç—…ï¼?span class='term'>å¥åº·çš„æ‹çˆ?/span>æ˜¯æ„Ÿæ€§ç†æ€§å¹¶å­˜ã€‚å­¦ä¼?span class='highlight'>è‡ªæˆ‘è§‰å¯Ÿ</span>ï¼Œåœ¨éœ€è¦æ„Ÿæ€§æ—¶æ„Ÿæ€§ï¼Œéœ€è¦ç†æ€§æ—¶ç†æ€§ã€?/p>";
            
            document.getElementById('psychoContent').innerHTML = psycho;
        }

        function downloadReport() {
            alert('æŠ¥å‘Šå·²ä¿å­˜ï¼');
        }

        function share() {
            alert('è¯·åˆ†äº«ç»™æœ‹å‹~');
        }
    </script>
</body>
</html>
