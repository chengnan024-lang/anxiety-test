<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ‹çˆ±ä¾æ‹ç±»å‹æµ‹è¯• | ä½ å±äºå“ªç§ä¾æ‹é£æ ¼ï¼Ÿ</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: 'Noto Sans SC', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
            background: linear-gradient(135deg, #FFE5E5 0%, #FFF5F5 50%, #FFF0F5 100%); 
            min-height: 100vh; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            padding: 20px;
            background-attachment: fixed;
        }
        
        .container { 
            background: rgba(255, 255, 255, 0.95); 
            border-radius: 24px; 
            padding: 40px 28px; 
            max-width: 420px; 
            width: 100%; 
            text-align: center; 
            box-shadow: 0 8px 32px rgba(255, 105, 135, 0.15); 
            position: relative;
            backdrop-filter: blur(10px);
        }
        
        h1 { 
            color: #1a1a1a; 
            font-size: 26px; 
            font-weight: 700; 
            margin-bottom: 8px; 
            letter-spacing: -0.5px;
        }
        
        .subtitle { 
            color: #666; 
            font-size: 14px; 
            margin-bottom: 28px; 
            line-height: 1.6; 
        }
        
        .tag { 
            display: inline-block; 
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E8E 100%); 
            color: white; 
            padding: 8px 20px; 
            border-radius: 20px; 
            font-size: 12px; 
            margin-bottom: 24px;
            font-weight: 500;
            box-shadow: 0 4px 12px rgba(255, 107, 107, 0.3);
        }
        
        .btn { 
            background: white; 
            color: #1a1a1a; 
            border: 2px solid #f0f0f0; 
            padding: 18px 24px; 
            font-size: 15px; 
            border-radius: 16px; 
            cursor: pointer; 
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
            width: 100%; 
            margin-bottom: 14px; 
            text-align: left; 
            display: flex; 
            justify-content: space-between; 
            align-items: center;
        }
        
        .btn:hover { 
            transform: translateY(-2px); 
            box-shadow: 0 8px 24px rgba(255, 107, 107, 0.2);
            border-color: #FF6B6B;
        }
        
        .btn-right { 
            font-size: 14px; 
            font-weight: 600;
            color: #FF6B6B;
        }
        
        .btn-title { 
            font-weight: 600; 
            font-size: 16px; 
            color: #1a1a1a;
        }
        
        .btn-desc { 
            font-size: 12px; 
            color: #999; 
            display: block; 
            margin-top: 4px; 
        }
        
        .btn-premium { 
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E8E 100%); 
            color: white; 
            border: none;
        }
        
        .btn-premium:hover {
            border-color: transparent;
        }
        
        .btn-premium .btn-title { color: white; }
        .btn-premium .btn-desc { color: rgba(255,255,255,0.8); }
        .btn-premium .btn-right { color: white; }
        
        .tip { color: #999; font-size: 12px; margin-top: 24px; }
        
        .question { display: none; text-align: left; animation: fadeIn 0.3s ease; }
        .question.active { display: block; }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .question h2 { 
            color: #1a1a1a; 
            font-size: 18px; 
            margin-bottom: 28px; 
            line-height: 1.7; 
            font-weight: 500;
        }
        
        .progress { 
            color: #999; 
            font-size: 13px; 
            margin-bottom: 20px; 
            display: flex; 
            align-items: center; 
            gap: 12px; 
        }
        
        .progress-bar { 
            flex: 1; 
            height: 6px; 
            background: #f0f0f0; 
            border-radius: 3px; 
            overflow: hidden; 
        }
        
        .progress-fill { 
            height: 100%; 
            background: linear-gradient(90deg, #FF6B6B, #FF8E8E); 
            transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1); 
            border-radius: 3px;
        }
        
        .option { 
            display: block; 
            width: 100%; 
            padding: 16px 20px; 
            margin-bottom: 12px; 
            border: 2px solid #f0f0f0; 
            border-radius: 14px; 
            background: white; 
            font-size: 15px; 
            cursor: pointer; 
            transition: all 0.2s; 
            text-align: left;
            color: #333;
        }
        
        .option:hover { 
            border-color: #FF6B6B; 
            background: #FFF8F8;
        }
        
        .calculating { display: none; text-align: center; padding: 40px 0; }
        .calculating.active { display: block; }
        
        .loading-spinner {
            width: 40px;
            height: 40px;
            border: 3px solid #f0f0f0;
            border-top-color: #FF6B6B;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .result { display: none; animation: fadeIn 0.4s ease; }
        .result.active { display: block; }
        
        .result-emoji { font-size: 56px; margin-bottom: 12px; }
        .result-type { 
            font-size: 28px; 
            font-weight: 700; 
            color: #FF6B6B; 
            margin-bottom: 8px; 
        }
        
        .result-desc { 
            font-size: 15px; 
            color: #666; 
            margin-bottom: 24px; 
            line-height: 1.8;
            padding: 0 8px;
        }
        
        .section { 
            text-align: left; 
            margin-top: 24px; 
            padding-top: 24px; 
            border-top: 1px solid #f5f5f5; 
        }
        
        .section h3 { 
            font-size: 15px; 
            color: #1a1a1a; 
            margin-bottom: 16px;
            font-weight: 600;
        }
        
        .detail-item { 
            display: flex; 
            justify-content: space-between; 
            padding: 12px 0; 
            border-bottom: 1px solid #f8f8f8; 
            font-size: 14px; 
        }
        
        .detail-label { color: #666; }
        .detail-value { color: #1a1a1a; font-weight: 500; }
        
        .locked { display: none; margin-top: 24px; }
        .locked.show { display: block; }
        
        .pay-btn { 
            background: linear-gradient(135deg, #FF6B6B 0%, #FF8E8E 100%); 
            margin-top: 20px; 
            justify-content: center; 
            color: white;
            border: none;
        }
        
        .pay-btn.show { display: flex; }
        
        .free-btn { 
            background: #07c160; 
            margin-top: 12px; 
            justify-content: center; 
            color: white;
            border: none;
        }
        
        .tip-red { 
            color: #FF6B6B; 
            font-size: 12px; 
            margin-top: 20px; 
            padding: 14px; 
            background: #FFF5F5; 
            border-radius: 12px; 
            text-align: left;
            line-height: 1.6;
        }
        
        .feature-box { 
            background: linear-gradient(135deg, #FFF5F5 0%, #FFF8F8 100%); 
            border-radius: 16px; 
            padding: 20px; 
            margin: 20px 0; 
            text-align: left;
            border: 1px solid #FFE5E5;
        }
        
        .feature-box h4 { 
            color: #FF6B6B; 
            font-size: 15px; 
            margin-bottom: 14px;
            font-weight: 600;
        }
        
        .feature-item { 
            font-size: 13px; 
            color: #666; 
            padding: 8px 0;
            display: flex;
            align-items: center;
        }
        
        .feature-item::before {
            content: "âœ“";
            color: #FF6B6B;
            margin-right: 10px;
            font-weight: bold;
        }
        
        .psycho-section { 
            background: linear-gradient(135deg, #1a1a2e 0%, #2d2d4a 100%); 
            border-radius: 16px; 
            padding: 24px; 
            margin: 20px 0; 
            text-align: left; 
        }
        
        .psycho-section h4 { 
            color: #FFB8B8; 
            font-size: 15px; 
            margin-bottom: 16px;
            font-weight: 600;
        }
        
        .psycho-content { 
            font-size: 13px; 
            color: #d4d4d8; 
            line-height: 1.9; 
            text-align: left; 
        }
        
        .psycho-content p { margin-bottom: 14px; }
        
        .highlight { color: #FFB8B8; font-weight: 600; }
        .term { color: #A78BFA; font-style: italic; }
        
        .wechat-pay { background: #07c160; color: white; border: none; }
        .alipay { background: #1677ff; color: white; border: none; margin-top: 10px; }
        
        .price-tag {
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: #1a1a1a;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 700;
        }
    </style>
</head>
<body>
    <!-- é¦–é¡µ -->
    <div class="container" id="home">
        <span class="tag">å°çº¢ä¹¦ 10ä¸‡+ äººæµ‹è¿‡</span>
        <h1>æ‹çˆ±ä¾æ‹ç±»å‹æµ‹è¯•</h1>
        <p class="subtitle">æµ‹ä¸€æµ‹ä½ çš„ä¾æ‹é£æ ¼<br>äº†è§£è‡ªå·±åœ¨äº²å¯†å…³ç³»ä¸­çš„çœŸå®æ¨¡æ ·</p>
        
        <button class="btn" onclick="start(10)">
            <div>
                <div class="btn-title">å¿«é€Ÿç‰ˆ</div>
                <span class="btn-desc">10é“é¢˜ Â· çº¦1åˆ†é’Ÿ</span>
            </div>
            <span class="btn-right">å…è´¹</span>
        </button>
        
        <button class="btn" onclick="start(16)">
            <div>
                <div class="btn-title">æ ‡å‡†ç‰ˆ</div>
                <span class="btn-desc">16é“é¢˜ Â· çº¦3åˆ†é’Ÿ</span>
            </div>
            <span class="btn-right">å…è´¹</span>
        </button>
        
        <button class="btn btn-premium" onclick="start(25)">
            <div>
                <div class="btn-title">
                    æ·±åº¦ç‰ˆ
                    <span class="price-tag">çˆ†æ¬¾</span>
                </div>
                <span class="btn-desc">25é“é¢˜ Â· å«æ·±åº¦è§£æ</span>
            </div>
            <span class="btn-right">Â¥2.99</span>
        </button>
        
        <p class="tip">æœ¬æµ‹è¯•ä»…ä¾›å‚è€ƒï¼Œä¸æ„æˆæƒ…æ„Ÿå»ºè®®</p>
    </div>

    <!-- è®¡ç®—é¡µ -->
    <div class="container calculating" id="calculating">
        <div class="loading-spinner"></div>
        <h1>åˆ†æä¸­...</h1>
        <p class="subtitle">æ­£åœ¨è§£æä½ çš„æ‹çˆ±ä¾æ‹æ¨¡å¼</p>
    </div>

    <!-- ç­”é¢˜é¡µ -->
    <div class="container question" id="quiz">
        <div class="progress">
            <span id="progress-text">1/25</span>
            <div class="progress-bar"><div class="progress-fill" id="progress-fill" style="width: 4%"></div></div>
        </div>
        <h2 id="questionText"></h2>
        <div id="options"></div>
    </div>

    <!-- ç»“æœé¡µ -->
    <div class="container result" id="result">
        <span class="tag">æµ‹è¯„å®Œæˆ</span>
        
        <div class="result-emoji" id="emoji">ğŸ’•</div>
        <div class="result-type" id="typeName">å®‰å…¨å‹</div>
        <div class="result-desc" id="typeDesc">ä½ æ‹¥æœ‰å¥åº·çš„ä¾æ‹æ¨¡å¼</div>
        
        <div class="section">
            <h3>ğŸ“Š ä¾æ‹ç»´åº¦åˆ†æ</h3>
            <div class="detail-item">
                <span class="detail-label">ç„¦è™‘æ°´å¹³</span>
                <span class="detail-value" id="anxietyLevel">-</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">å›é¿æ°´å¹³</span>
                <span class="detail-value" id="avoidanceLevel">-</span>
            </div>
        </div>
        
        <div class="section">
            <h3>ğŸ’• æ‹çˆ±ç‰¹å¾</h3>
            <div class="detail-item">
                <span class="detail-label">äº²å¯†éœ€æ±‚</span>
                <span class="detail-value" id="intimacyNeed">-</span>
            </div>
            <div class="detail-item">
                <span class="detail-label">è¡¨è¾¾æ–¹å¼</span>
                <span class="detail-value" id="expressionStyle">-</span>
            </div>
        </div>
        
        <div class="locked" id="locked-section">
            <div class="feature-box">
                <h4>ğŸ”’ è§£é”æ·±åº¦åˆ†æ</h4>
                <p style="color:#666;font-size:13px;margin-bottom:14px;">Â¥2.99è§£é”å…¨éƒ¨æ·±åº¦å†…å®¹</p>
                <div class="feature-item">ä¾æ‹ç±»å‹æ·±åº¦è§£è¯»</div>
                <div class="feature-item">åŸç”Ÿå®¶åº­å½±å“åˆ†æ</div>
                <div class="feature-item">æ‹çˆ±æ¨¡å¼æˆå› </div>
                <div class="feature-item">å…³ç³»æ”¹è¿›å»ºè®®</div>
                <div class="feature-item">ç²¾ç¥åˆ†ææ½œæ„è¯†è§£è¯»</div>
            </div>
        </div>
        
        <button class="btn pay-btn" id="payBtn" onclick="showPay()">
            <span style="text-align:center;width:100%;font-weight:600;">ç«‹å³æ”¯ä»˜ Â¥2.99</span>
        </button>
        
        <button class="btn free-btn" onclick="share()">
            <span style="text-align:center;width:100%;font-weight:600;">åˆ†äº«ç»™æœ‹å‹ä¸€èµ·æµ‹</span>
        </button>
        
        <p class="tip-red">ğŸ’¡ ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸ä½œä¸ºæƒ…æ„Ÿå»ºè®®</p>
    </div>

    <!-- æ”¯ä»˜é¡µ -->
    <div class="container" id="paypage" style="display:none;">
        <span class="tag">å®‰å…¨æ”¯ä»˜</span>
        <h1>ç¡®è®¤æ”¯ä»˜</h1>
        <p class="subtitle">Â¥2.99 è§£é”æ·±åº¦ç‰ˆ</p>
        
        <div class="feature-box">
            <div class="detail-item"><span>ä¾æ‹ç±»å‹æ·±åº¦è§£è¯»</span><span>âœ“</span></div>
            <div class="detail-item"><span>åŸç”Ÿå®¶åº­åˆ†æ</span><span>âœ“</span></div>
            <div class="detail-item"><span>æ‹çˆ±æ¨¡å¼æˆå› </span><span>âœ“</span></div>
            <div class="detail-item"><span>ç²¾ç¥åˆ†æè§£è¯»</span><span>âœ“</span></div>
        </div>
        
        <button class="btn wechat-pay" onclick="paySuccess()">
            <span style="text-align:center;width:100%;font-weight:600;">å¾®ä¿¡æ”¯ä»˜ Â¥2.99</span>
        </button>
        
        <button class="btn alipay" style="margin-top:10px;">
            <span style="text-align:center;width:100%;font-weight:600;">æ”¯ä»˜å®æ”¯ä»˜ Â¥2.99</span>
        </button>
        
        <button class="btn" style="margin-top:16px;background:#f5f5f5;color:#666;border:none;" onclick="back()">
            <span style="text-align:center;width:100%;font-weight:600;">è¿”å›</span>
        </button>
    </div>

    <!-- å®Œæ•´æŠ¥å‘Šé¡µ -->
    <div class="container result" id="fullreport" style="display:none;">
        <span class="tag" style="background:linear-gradient(135deg, #07c160 0%, #06ad56 100%);">ğŸ‰ æ”¯ä»˜æˆåŠŸ</span>
        
        <div class="result-emoji" id="emoji2">ğŸ’•</div>
        <div class="result-type" id="typeName2">å®‰å…¨å‹</div>
        <div class="result-desc" id="typeDesc2">ä½ æ‹¥æœ‰å¥åº·çš„ä¾æ‹æ¨¡å¼</div>
        
        <!-- åŸç”Ÿå®¶åº­ -->
        <div class="psycho-section">
            <h4>ğŸ  åŸç”Ÿå®¶åº­å½±å“åˆ†æ</h4>
            <div class="psycho-content" id="familyAnalysis"></div>
        </div>
        
        <!-- æ‹çˆ±æ¨¡å¼ -->
        <div class="psycho-section">
            <h4>ğŸ’” æ‹çˆ±æ¨¡å¼æˆå› </h4>
            <div class="psycho-content" id="patternAnalysis"></div>
        </div>
        
        <!-- å…³ç³»å»ºè®® -->
        <div class="feature-box">
            <h4>ğŸ’¡ å…³ç³»æ”¹è¿›å»ºè®®</h4>
            <div id="relationshipAdvice" style="font-size:13px;color:#666;line-height:1.8;"></div>
        </div>
        
        <!-- ç²¾ç¥åˆ†æ -->
        <div class="psycho-section">
            <h4>ğŸ§  æ½œæ„è¯†ç²¾ç¥åˆ†æ</h4>
            <div class="psycho-content" id="psychoContent"></div>
        </div>
        
        <button class="btn wechat-pay" style="margin-top:20px;" onclick="downloadReport()">
            <span style="text-align:center;width:100%;font-weight:600;">ä¿å­˜æŠ¥å‘Šåˆ°ç›¸å†Œ</span>
        </button>
        
        <button class="btn" style="margin-top:10px;background:#f5f5f5;color:#333;border:none;" onclick="share()">
            <span style="text-align:center;width:100%;font-weight:600;">åˆ†äº«ç»™æœ‹å‹</span>
        </button>
        
        <p class="tip">ç»“æœä»…ä¾›å‚è€ƒï¼Œä¸ä½œä¸ºè¯Šæ–­ä¾æ®</p>
    </div>

    <script>
        const questions = [
            "å½“æ‹äººæ²¡æœ‰åŠæ—¶å›å¤æ¶ˆæ¯æ—¶ï¼Œä½ ä¼šï¼š",
            "æ‹çˆ±ä¸­ï¼Œä½ ç»å¸¸æ‹…å¿ƒå¤±å»å¯¹æ–¹å—ï¼Ÿ",
            "ä½ å¸Œæœ›æ‹äººç»å¸¸è¡¨è¾¾çˆ±æ„å—ï¼Ÿ",
            "äº‰åµåï¼Œä½ ä¼šåå¤æ€è€ƒè°å¯¹è°é”™å—ï¼Ÿ",
            "ä½ ä¼šç»å¸¸æŸ¥çœ‹æ‹äººçš„ç¤¾äº¤åŠ¨æ€å—ï¼Ÿ",
            "æ‹çˆ±ä¸­ä½ éœ€è¦ä¸ªäººç©ºé—´å—ï¼Ÿ",
            "è¡¨è¾¾æƒ…æ„Ÿå¯¹ä½ æ¥è¯´å›°éš¾å—ï¼Ÿ",
            "ä½ å€¾å‘äºåœ¨å…³ç³»ä¸­ä¿æŒç‹¬ç«‹å—ï¼Ÿ",
            "å½“å…³ç³»å˜äº²å¯†æ—¶ï¼Œä½ æƒ³åé€€å—ï¼Ÿ",
            "ä½ ä¸å–œæ¬¢ä¾èµ–æ‹äººå—ï¼Ÿ",
            "ä½ çš„ç«¥å¹´ä¸»è¦ä¸è°åœ¨ä¸€èµ·ï¼Ÿ",
            "çˆ¶æ¯å…³ç³»å¯¹ä½ çš„å½±å“æ˜¯ï¼Ÿ",
            "åˆæ‹ç»å†è®©ä½ å¯¹çˆ±æƒ…æ›´ï¼š",
            "æ‹çˆ±ä¸­ä½ æœ€å®³æ€•çš„æ˜¯ï¼š",
            "ä½ é€šå¸¸å¦‚ä½•è¡¨è¾¾çˆ±æ„ï¼Ÿ",
            "æ‹äººæƒ¹ä½ ç”Ÿæ°”æ—¶ï¼Œä½ ä¼šï¼š",
            "ä½ ä¼šåœ¨ç¤¾äº¤åª’ä½“ä¸Šç§€æ©çˆ±å—ï¼Ÿ",
            "æ‹çˆ±ä¸­ä½ ä¼šç»å¸¸å¦¥åå—ï¼Ÿ",
            "ä½ ç›¸ä¿¡æ°¸æ’çš„çˆ±æƒ…å—ï¼Ÿ",
            "å¦‚æœå¤±æ‹ï¼Œä½ ä¼šï¼š",
            "ä½ ç†æƒ³çš„æ‹çˆ±èŠ‚å¥æ˜¯ï¼š",
            "ä½ ä¼šä¸»åŠ¨è¿½æ±‚è¿˜æ˜¯ç­‰å¾…è¢«è¿½ï¼Ÿ",
            "æ‹çˆ±ä¸­ä½ ä¼šä¿æŒç¥ç§˜æ„Ÿå—ï¼Ÿ",
            "ä½ è®¤ä¸ºçˆ±æƒ…éœ€è¦åŠªåŠ›ç»è¥å—ï¼Ÿ",
            "ä½ ç›¸ä¿¡ç¼˜åˆ†è¿˜æ˜¯åŠªåŠ›ï¼Ÿ"
        ];
        
        const options = [
            ["ç„¦è™‘ï¼Œç«‹åˆ»è”ç³»å¯¹æ–¹", "æ­£å¸¸ç­‰å¾…", "æ— æ‰€è°“"],
            ["ç»å¸¸æ‹…å¿ƒ", "å¶å°”æ‹…å¿ƒ", "ä»ä¸æ‹…å¿ƒ"],
            ["éå¸¸å¸Œæœ›", "é€‚åº¦å°±å¥½", "ä¸éœ€è¦"],
            ["ä¼šçš„ï¼Œåå¤æ€è€ƒ", "ç¨å¾®æƒ³ä¸€ä¸‹", "ä¸æƒ³é‚£ä¹ˆå¤š"],
            ["ç»å¸¸æŸ¥çœ‹", "å¶å°”çœ‹çœ‹", "ä»ä¸"],
            ["éå¸¸éœ€è¦", "é€‚åº¦éœ€è¦", "ä¸éœ€è¦"],
            ["éå¸¸å›°éš¾", "çœ‹æƒ…å†µ", "å¾ˆå®¹æ˜“"],
            ["æ˜¯çš„ï¼Œæˆ‘å–œæ¬¢ç‹¬ç«‹", "çœ‹æƒ…å†µ", "ä¸å–œæ¬¢"],
            ["æ˜¯çš„ï¼Œæƒ³åé€€", "å¶å°”", "ä¸ä¼š"],
            ["æ˜¯çš„ï¼Œä¸å–œæ¬¢ä¾èµ–", "çœ‹æƒ…å†µ", "å–œæ¬¢ä¾èµ–"],
            ["åŒäº²éƒ½åœ¨", "å•äº²", "å…¶ä»–"],
            ["ç§¯æå½±å“", "ä¸€èˆ¬", "è´Ÿé¢å½±å“"],
            ["æ›´åŠ è°¨æ…", "æ²¡æœ‰å½±å“", "æ›´åŠ æŠ•å…¥"],
            ["è¢«æŠ›å¼ƒ", "è¢«æ¬ºéª—", "å¤±å»è‡ªæˆ‘"],
            ["è¯­è¨€è¡¨è¾¾", "è¡ŒåŠ¨è¡¨è¾¾", "ä¸¤è€…éƒ½æœ‰"],
            ["ç›´æ¥è¡¨è¾¾ä¸æ»¡", "å†·æˆ˜", "è¯´å‡ºæ¥å°±å¥½"],
            ["ç»å¸¸", "å¶å°”", "ä»ä¸"],
            ["ç»å¸¸å¦¥å", "å¶å°”", "å¾ˆå°‘"],
            ["ç›¸ä¿¡", "åŠä¿¡åŠç–‘", "ä¸ç›¸ä¿¡"],
            ["å¾ˆéš¾è¿‡ä¸€æ®µæ—¶é—´", "å¾ˆå¿«èµ°å‡ºæ¥", "æ²¡ä»€ä¹ˆæ„Ÿè§‰"],
            ["å¿«é€Ÿè¿›å…¥äº²å¯†", "å¾ªåºæ¸è¿›", "æ…¢æ…¢æ¥"],
            ["ä¸»åŠ¨è¿½æ±‚", "ç­‰å¾…è¢«è¿½", "çœ‹æ„Ÿè§‰"],
            ["ä¼šçš„ï¼Œä¿æŒç¥ç§˜", "çœ‹æƒ…å†µ", "å®Œå…¨å¦è¯š"],
            ["éœ€è¦åŠªåŠ›", "é¡ºå…¶è‡ªç„¶", "ä¸å¤ªç›¸ä¿¡"],
            ["ç¼˜åˆ†å¤©æ³¨å®š", "ä¸€åŠä¸€åŠ", "åŠªåŠ›æ›´é‡è¦"]
        ];
        
        const attachmentTypes = {
            secure: { name: "å®‰å…¨å‹", emoji: "ğŸ’•", desc: "ä½ æ‹¥æœ‰å¥åº·çš„ä¾æ‹æ¨¡å¼ï¼Œæ—¢èƒ½äº«å—äº²å¯†ï¼Œåˆèƒ½ä¿æŒç‹¬ç«‹ã€‚ä½ ç›¸ä¿¡è‡ªå·±å€¼å¾—è¢«çˆ±ï¼Œä¹Ÿä¿¡ä»»ä¼´ä¾£ã€‚" },
            anxious: { name: "ç„¦è™‘å‹", emoji: "ğŸ’”", desc: "ä½ æ¸´æœ›äº²å¯†ä½†åˆå®³æ€•è¢«æŠ›å¼ƒï¼Œç»å¸¸æ„Ÿåˆ°ä¸å®‰ã€‚ä½ éœ€è¦ä¼´ä¾£ä¸æ–­ç¡®è®¤çˆ±æ„ï¼Œå®¹æ˜“è¿‡åº¦ä¾èµ–ã€‚" },
            avoidant: { name: "å›é¿å‹", emoji: "ğŸ’¤", desc: "ä½ é‡è§†ç‹¬ç«‹ç©ºé—´ï¼Œä¸å–œæ¬¢è¿‡åº¦äº²å¯†ã€‚ä½ å¯èƒ½åœ¨æƒ…æ„Ÿä¸Šä¿æŒè·ç¦»ï¼Œä»¥å…å—ä¼¤ã€‚" },
            fearful: { name: "æ··ä¹±å‹", emoji: "ğŸ’”", desc: "ä½ çš„æ‹çˆ±æ¨¡å¼å¤æ‚ï¼Œæ—¢æ¸´æœ›äº²å¯†åˆå®³æ€•å—ä¼¤ã€‚æƒ…æ„Ÿèµ·ä¼å¤§ï¼Œå®¹æ˜“é™·å…¥çŸ›ç›¾å…³ç³»ã€‚" }
        };
        
        let current = 0;
        let answers = [];
        let totalQuestions = 25;
        let anxiety = 0;
        let avoidance = 0;

        function start(count) {
            totalQuestions = count;
            current = 0;
            answers = [];
            anxiety = 0;
            avoidance = 0;
            document.getElementById('home').style.display = 'none';
            document.getElementById('quiz').classList.add('active');
            showQuestion();
        }

        function showQuestion() {
            document.getElementById('progress-text').textContent = `${current + 1}/${totalQuestions}`;
            document.getElementById('progress-fill').style.width = `${((current + 1) / totalQuestions) * 100}%`;
            document.getElementById('questionText').textContent = questions[current];
            
            const opts = document.getElementById('options');
            opts.innerHTML = '';
            options[current].forEach((opt, i) => {
                const btn = document.createElement('button');
                btn.className = 'option';
                btn.textContent = opt;
                btn.onclick = () => select(i);
                opts.appendChild(btn);
            });
        }

        function select(i) {
            answers.push(i);
            
            if (current < 5) anxiety += (2 - i);
            if (current >= 5 && current < 10) avoidance += i;
            
            if (current < totalQuestions - 1) {
                current++;
                showQuestion();
            } else {
                showCalculating();
            }
        }

        function showCalculating() {
            document.getElementById('quiz').classList.remove('active');
            document.getElementById('calculating').classList.add('active');
            
            setTimeout(() => {
                document.getElementById('calculating').classList.remove('active');
                showResult();
            }, 1500);
        }

        function showResult() {
            anxiety = Math.max(0, Math.min(10, anxiety));
            avoidance = Math.max(0, Math.min(10, avoidance));
            
            let type = "secure";
            if (anxiety >= 5 && avoidance >= 5) type = "fearful";
            else if (anxiety >= 5) type = "anxious";
            else if (avoidance >= 5) type = "avoidant";
            
            const result = attachmentTypes[type];
            
            document.getElementById('emoji').textContent = result.emoji;
            document.getElementById('typeName').textContent = result.name;
            document.getElementById('typeDesc').textContent = result.desc;
            
            document.getElementById('anxietyLevel').textContent = anxiety >= 5 ? "é«˜" : (anxiety >= 3 ? "ä¸­" : "ä½");
            document.getElementById('avoidanceLevel').textContent = avoidance >= 5 ? "é«˜" : (avoidance >= 3 ? "ä¸­" : "ä½");
            document.getElementById('intimacyNeed').textContent = anxiety >= 5 ? "é«˜" : "é€‚ä¸­";
            document.getElementById('expressionStyle').textContent = type === "avoidant" ? "å«è“„" : "ç›´æ¥";
            
            if (totalQuestions >= 25) {
                document.getElementById('locked-section').classList.add('show');
                document.getElementById('payBtn').classList.add('show');
            }
            
            document.getElementById('result').classList.add('active');
        }

        function showPay() {
            document.getElementById('result').classList.remove('active');
            document.getElementById('paypage').style.display = 'block';
        }

        function back() {
            document.getElementById('paypage').style.display = 'none';
            document.getElementById('result').classList.add('active');
        }

        function paySuccess() {
            document.getElementById('paypage').style.display = 'none';
            document.getElementById('fullreport').style.display = 'block';
            
            const type = document.getElementById('typeName').textContent;
            const result = Object.values(attachmentTypes).find(r => r.name === type) || attachmentTypes.secure;
            
            document.getElementById('emoji2').textContent = result.emoji;
            document.getElementById('typeName2').textContent = result.name;
            document.getElementById('typeDesc2').textContent = result.desc;
            
            generateDeepAnalysis(type);
        }

        function generateDeepAnalysis(type) {
            const familyTexts = {
                "å®‰å…¨å‹": "ä½ åœ¨æœ‰çˆ±ä¸”ç¨³å®šçš„ç¯å¢ƒä¸­æˆé•¿ï¼Œçˆ¶æ¯å…³ç³»å’Œè°ï¼Œè®©ä½ å»ºç«‹äº†å¯¹äº²å¯†å…³ç³»çš„ä¿¡ä»»ã€‚",
                "ç„¦è™‘å‹": "å¯èƒ½ç”±äºç«¥å¹´ç…§é¡¾è€…çš„ä¸ç¨³å®šï¼ˆæ—¶å†·æ—¶çƒ­ï¼‰ï¼Œè®©ä½ å¯¹äº²å¯†å…³ç³»äº§ç”Ÿä¸å®‰å…¨æ„Ÿã€‚",
                "å›é¿å‹": "å¯èƒ½ç”±äºç«¥å¹´æƒ…æ„Ÿéœ€æ±‚æœªè¢«æ»¡è¶³ï¼Œæˆ–è¿‡åº¦æ§åˆ¶ï¼Œè®©ä½ å­¦ä¼šäº†æƒ…æ„Ÿç‹¬ç«‹ã€‚",
                "æ··ä¹±å‹": "å¯èƒ½ç»å†äº†å¤æ‚çš„å®¶åº­ç¯å¢ƒï¼Œå¦‚çˆ¶æ¯å†²çªã€å¿½è§†æˆ–è™å¾…ï¼Œå¯¼è‡´ä¾æ‹ç³»ç»Ÿç´Šä¹±ã€‚"
            };
            document.getElementById('familyAnalysis').innerHTML = "<p>" + (familyTexts[type] || "") + "</p>";
            
            const patternTexts = {
                "å®‰å…¨å‹": "ä½ å½¢æˆäº†å¥åº·çš„'å†…éƒ¨å·¥ä½œæ¨¡å‹'ï¼Œç›¸ä¿¡è‡ªå·±å€¼å¾—è¢«çˆ±ï¼Œä¹Ÿç›¸ä¿¡ä»–äººæ˜¯å¯ä¿¡ä»»çš„ã€‚",
                "ç„¦è™‘å‹": "ä½ çš„'å†…éƒ¨å·¥ä½œæ¨¡å‹'è®¤ä¸º'æˆ‘ä¸å¤Ÿå¥½'ä¸”'ä»–äººä¸å¯é 'ï¼Œå¯¼è‡´å¯¹è¢«æŠ›å¼ƒçš„ææƒ§ã€‚",
                "å›é¿å‹": "ä½ å½¢æˆäº†'æˆ‘ä¸éœ€è¦åˆ«äºº'çš„é˜²å¾¡æ¨¡å¼ï¼Œé€šè¿‡æƒ…æ„Ÿéš”ç¦»æ¥ä¿æŠ¤è‡ªå·±ã€‚",
                "æ··ä¹±å‹": "ä½ çš„ä¾æ‹ç³»ç»ŸåŒæ—¶è¢«æ¿€æ´»äº†äº²å¯†éœ€æ±‚å’Œé€ƒé¿å†²åŠ¨ï¼Œå¯¼è‡´åœ¨å…³ç³»ä¸­çŸ›ç›¾é‡é‡ã€‚"
            };
            document.getElementById('patternAnalysis').innerHTML = "<p>" + (patternTexts[type] || "") + "</p>";
            
            const adviceTexts = {
                "å®‰å…¨å‹": "ç»§ç»­ä¿æŒï¼ä½ å¯ä»¥å°è¯•æ›´å¤šè¡¨è¾¾æƒ…æ„Ÿï¼Œå¸®åŠ©ä¼´ä¾£ç†è§£ä½ çš„éœ€æ±‚ã€‚",
                "ç„¦è™‘å‹": "å»ºè®®ï¼š1.å»ºç«‹è‡ªå·±çš„ç¤¾äº¤åœˆä¸è¿‡åº¦ä¾èµ–æ‹äºº 2.ç»ƒä¹ æƒ…ç»ªè‡ªæˆ‘å®‰æŠš 3.ä¸ä¼´ä¾£å¦è¯šæ²Ÿé€šéœ€æ±‚ã€‚",
                "å›é¿å‹": "å»ºè®®ï¼š1.å°è¯•é€‚åº¦æ‰“å¼€å¿ƒæ‰‰ 2.è®¤è¯†åˆ°ç‹¬ç«‹ä¸äº²å¯†å¯ä»¥å¹¶å­˜ 3.æ¥å—ä¼´ä¾£çš„æ”¯æŒã€‚",
                "æ··ä¹±å‹": "å»ºè®®ï¼š1.å¯»æ±‚ä¸“ä¸šå¸®åŠ©ç†æ¸…ä¾æ‹æ¨¡å¼ 2.å­¦ä¼šè¯†åˆ«è‡ªå·±çš„çœŸå®æ„Ÿå— 3.å»ºç«‹å¥åº·çš„å…³ç³»è¾¹ç•Œã€‚"
            };
            document.getElementById('relationshipAdvice').innerHTML = "<p>" + (adviceTexts[type] || "") + "</p>";
            
            let psycho = "";
            if (type === "å®‰å…¨å‹") {
                psycho = "<p>ä»<span class='highlight'>ç²¾ç¥åˆ†æ</span>è§’åº¦ï¼Œä½ çš„<span class='term'>å®¢ä½“å…³ç³»</span>å‘å±•è‰¯å¥½ï¼Œæ—©æœŸç…§é¡¾è€…æ»¡è¶³äº†ä½ çš„<span class='highlight'>æƒ…æ„Ÿéœ€æ±‚</span>ï¼Œè®©ä½ å½¢æˆäº†<span class='term'>å®‰å…¨åŸºåœ°</span>ã€‚</p>";
            } else if (type === "ç„¦è™‘å‹") {
                psycho = "<p>ä»<span class='highlight'>ç²¾ç¥åˆ†æ</span>è§’åº¦ï¼Œä½ çš„<span class='term'>ä¾æ‹</span>å‘ˆç°<span class='highlight'>çŸ›ç›¾æ€§</span>ã€‚æºäº<span class='term'>æ—©æœŸå®¢ä½“</span>çš„ä¸ç¨³å®šï¼Œ<span class='highlight'>æ—¶å¥½æ—¶å</span>çš„ç…§é¡¾æ–¹å¼è®©ä½ å½¢æˆäº†<span class='term'>æ··åˆå‹ä¾æ‹</span>ã€‚</p>";
            } else if (type === "å›é¿å‹") {
                psycho = "<p>ä»<span class='highlight'>ç²¾ç¥åˆ†æ</span>è§’åº¦ï¼Œä½ å‘å±•äº†<span class='term'>æƒ…æ„Ÿéš”ç¦»</span>è¿™ä¸€<span class='highlight'>é˜²å¾¡æœºåˆ¶</span>ã€‚æ—©æœŸç»å†å‘Šè¯‰ä½ <span class='term'>ä¾èµ–ä»–äººæ˜¯å±é™©çš„</span>ï¼Œæ‰€ä»¥ç”¨<span class='highlight'>å‹æŠ‘</span>æƒ…æ„Ÿéœ€æ±‚æ¥ä¿æŠ¤è‡ªå·±ã€‚</p>";
            } else {
                psycho = "<p>ä»<span class='highlight'>ç²¾ç¥åˆ†æ</span>è§’åº¦ï¼Œä½ çš„<span class='term'>ä¾æ‹ç³»ç»Ÿ</span>å¤„äº<span class='highlight'>æ··ä¹±</span>çŠ¶æ€ã€‚è¿™æ˜¯æœ€å¤æ‚çš„<span class='term'>é˜²å¾¡ç»“æ„</span>â€”â€”æ—¢æ¸´æœ›<span class='highlight'>äº²å¯†</span>åˆå®³æ€•<span class='term'>è¢«åå™¬</span>ã€‚</p>";
            }
            
            psycho += "<p style='margin-top:15px;'><span class='highlight'>åˆ†æå¸ˆè¯´ï¼š</span>ä¾æ‹ç±»å‹ä¸æ˜¯å‘½è¿ï¼Œè€Œæ˜¯<span class='term'>å¯æ”¹å˜</span>çš„ã€‚é€šè¿‡<span class='highlight'>è‡ªæˆ‘è§‰å¯Ÿ</span>å’Œå®‰å…¨å…³ç³»çš„ä½“éªŒï¼Œä½ å¯ä»¥é€æ­¥<span class='highlight'>ä¿®å¤</span>ä¾æ‹æ¨¡å¼ã€‚</p>";
            
            document.getElementById('psychoContent').innerHTML = psycho;
        }

        function downloadReport() {
            alert('æŠ¥å‘Šå·²ä¿å­˜ï¼');
        }

        function share() {
            alert('è¯·åˆ†äº«ç»™æœ‹å‹~');
        }
    </script>
</body>
</html>
